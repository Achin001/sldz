(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["designerModuleConfig0"],{"0947":function(e,t,n){},"35d9":function(e,t,n){"use strict";n("862b")},4047:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h3",{staticClass:"title separator"},[e._v("\n    "+e._s(e.title)+"\n    "),n("a-button",{staticStyle:{color:"#777"},attrs:{type:"link",ghost:"",size:"small",title:"更改所有的显示标签",icon:"edit"},on:{click:e.showAllEdit}})],1),[e.resultColumns?n("draggable",{attrs:{element:"div",handle:".drag-handle",options:{group:{name:"columns",pull:"false",put:!1},sort:!0,forceFallback:!0}},model:{value:e.resultColumns,callback:function(t){e.resultColumns=t},expression:"resultColumns"}},e._l(e.resultColumns,(function(t,o){return n("div",{key:o,staticClass:"row-container"},[n("a-row",{staticClass:"config-form-item"},[n("a-col",{attrs:{span:2}},[n("span",{staticClass:"col-icon-span drag-handle",attrs:{title:"拖拽可排序"}},[n("a-icon",{staticStyle:{fontSize:"20px"},attrs:{type:"bars"}})],1)]),n("a-col",{attrs:{span:e._f("anotherColSpan")(e._f("btnColSpan")(4,t,e.isExpand,e.expandColumnsFilter),2)}},[t.showInput?n("a-input",{attrs:{id:e.voType+"FieldNameEditInput_"+t.fieldName,size:"small"},on:{keyup:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.saveEdit(t)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.cancelEdit(t)}]},model:{value:t.editFieldLabel,callback:function(n){e.$set(t,"editFieldLabel",n)},expression:"col.editFieldLabel"}},[n("template",{slot:"addonAfter"},[n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"close",title:"关闭"},on:{click:function(n){return e.cancelEdit(t)}}}),n("a-divider",{attrs:{type:"vertical"}}),n("a-icon",{staticStyle:{color:"#2198f7",cursor:"pointer"},attrs:{type:"check",title:"保存"},on:{click:function(n){return e.saveEdit(t)}}})],1)],2):n("p",{staticClass:"icon-small-line"},[n("span",{staticStyle:{"padding-right":"2px"}},[e._v("\n                "+e._s(t.fieldLabel)+"\n              ")]),"BindEntity"===t.refCodeType?n("a-tag",{attrs:{color:"cyan"}},[e._v("\n                对象.字段\n              ")]):e._e(),"BindFieldList"===t.refCodeType?n("a-tag",{attrs:{color:"blue"}},[e._v("\n                对象字段列表\n              ")]):e._e()],1)],1),n("a-col",{staticStyle:{"text-align":"right"},attrs:{span:e._f("btnColSpan")(4,t,e.isExpand,e.expandColumnsFilter)}},[t.showInput?e._e():n("a-button",{staticStyle:{color:"#777"},attrs:{type:"link",size:"small",title:"更改该项显示标签",icon:"edit"},on:{click:function(n){return e.showEdit(t)}}}),e.isExpand&&(void 0===e.expandColumnsFilter||e.expandColumnsFilter(t))?n("a-button",{staticStyle:{color:"#777"},attrs:{type:"link",size:"small",title:t.expand?"收起":"展开",icon:t.expand?"up":"down"},on:{click:function(n){return e.toggleColExpand(t)}}}):e._e(),n("a-button",{staticStyle:{color:"#f36e70"},attrs:{type:"link",size:"small",title:"删除该项",icon:"delete"},on:{click:function(t){return e.removeColumn(o)}}})],1)],1),t.expand?[n("div",{staticClass:"expand-container"},[e._t("item-extra-content",null,{col:t,index:o})],2)]:e._e()],2)})),0):e._e(),n("a-row",[n("a-col",{attrs:{span:"22"}},[e.selectColumns.length>0?n("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,placeholder:"请选择搜索字段"},on:{change:function(t){return e.addColumn(t)}},model:{value:e.addFieldName,callback:function(t){e.addFieldName=t},expression:"addFieldName"}},e._l(e.selectColumns,(function(t,o){return n("a-select-option",{key:o,attrs:{value:t.fieldName}},[e._v("\n            "+e._s(t.fieldLabel)+"["+e._s(t.fieldName)+"]\n          ")])})),1):e._e()],1)],1)]],2)},i=[],l=(n("6762"),n("2fdb"),n("ac6a"),n("75fc")),a=(n("7514"),n("2ef0")),c=n.n(a),s=n("3aa3"),r=n("310e"),d=n.n(r),u={name:"ColumnListSelectorPlus",data:function(){return{resultColumns:[],validColumns:[],addFieldName:void 0,showAllEditFlag:!1}},methods:{initPrimaryKey:function(){if(!this.primaryKeyEvent||!this.columns||0===this.columns.length)return!1;var e=this.columns.find((function(e){return!0===e.primaryKey})),t=void 0===e?"id":e.fieldName;this.$emit("primaryKeyChange",t)},initValidColumns:function(){var e=this;if(this.columns&&this.columns.length>0){var t=this.columns;if(void 0!==this.validColumnsFilter&&(t=this.columns.filter(this.validColumnsFilter)),this.validColumns=c.a.cloneDeep(t),this.appendOtherProperties(this.validColumns),this.voType){var n=this.columns[0]["tableName"];s["a"].get("/diboot/devtools/pcDesigner/getVoRefList/".concat(n,"/").concat(this.voType)).then((function(t){if(0===t.code&&t.data){var n,o=t.data.filter((function(e){return"BindEntity"!==e.refCodeType&&"BindEntityList"!==e.refCodeType}));if(e.appendOtherProperties(o),(n=e.validColumns).push.apply(n,Object(l["a"])(o)),e.value.length>0?e.resultColumns=c.a.cloneDeep(e.value):e.resultColumns=c.a.cloneDeep(e.validColumns),e.needRefEntity){var i,a=t.data.filter((function(e){return"BindEntity"===e.refCodeType&&void 0!==e.columns&&e.columns.length>0})),s=[];a.forEach((function(e){var t=e.columns.filter((function(e){return"id"!==e.fieldName&&"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&!e.columnExt.refType})),n=t.map((function(t){return t.fieldName="".concat(e.fieldName,".").concat(t.fieldName),t.fieldLabel="".concat(e.fieldLabel).concat(t.fieldLabel),t.refCodeType=e.refCodeType,t.entityFieldName=e.fieldName,t}));s.push.apply(s,Object(l["a"])(n))})),e.appendOtherProperties(s),(i=e.validColumns).push.apply(i,s)}}else e.value.length>0?e.resultColumns=c.a.cloneDeep(e.value):e.resultColumns=c.a.cloneDeep(e.validColumns)})).catch((function(){e.value.length>0?e.resultColumns=c.a.cloneDeep(e.value):e.resultColumns=c.a.cloneDeep(e.validColumns)}))}else this.value.length>0?this.resultColumns=c.a.cloneDeep(this.value):this.resultColumns=c.a.cloneDeep(this.validColumns)}},addColumn:function(e){var t=this.validColumns.find((function(t){return t.fieldName===e}));if(void 0===t)return!1;this.addFieldName=void 0,this.resultColumns.push(t),this.$emit("change",this.resultColumns)},toggleColExpand:function(e){e.expand=!e.expand},removeColumn:function(e){var t=this.resultColumns.splice(e,1);if(t.length>0){var n=t[0],o=this.validColumns.find((function(e){return e.colName===n.colName}));if(void 0!==o){var i=this.validColumns.indexOf(o);-1!==i&&(this.validColumns[i]=n)}}this.$emit("change",this.resultColumns)},appendOtherProperties:function(e){var t=this;e.forEach((function(e){e.showInput=!1,e.expand=!1,e.editFieldLabel=e.fieldLabel,void 0!==t.colExtraPropertiesSetter&&t.colExtraPropertiesSetter(e)}))},showAllEdit:function(){var e=this;this.showAllEditFlag=!this.showAllEditFlag,this.resultColumns&&this.resultColumns.map((function(t){e.showAllEditFlag?t.showInput=!0:e.cancelEdit(t)}))},showEdit:function(e){var t=this;e.showInput=!0,setTimeout((function(){var n=document.getElementById("".concat(t.voType,"FieldNameEditInput_").concat(e.fieldName));n&&n.focus()}),200)},cancelEdit:function(e){e.editFieldLabel=e.fieldLabel,e.showInput=!1,this.focusNextColumn(e)},saveEdit:function(e){if(!e.editFieldLabel)return this.$message.error("字段标签名称不可为空"),!1;e.fieldLabel=e.editFieldLabel,e.showInput=!1,this.$emit("change",this.resultColumns),this.$forceUpdate(),this.focusNextColumn(e)},focusNextColumn:function(e){var t=this.resultColumns.indexOf(e)+1;if(t>0&&t<this.resultColumns.length){var n=this.resultColumns[t];n.showInput?document.getElementById("".concat(this.voType,"FieldNameEditInput_").concat(n.fieldName)).focus():this.focusNextColumn(n)}},changed:function(){this.$emit("change",this.resultColumns)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}},filters:{btnColSpan:function(e,t,n,o){return e=e||4,n&&(e+=2),void 0===o||o(t)||(e-=2),t.showInput||(e+=2),e},anotherColSpan:function(e,t){return 24-e-t}},computed:{columns:function(){return this.initColumns?this.initColumns:this.$store.state.database.columns},selectColumns:function(){if(void 0===this.resultColumns)return[];var e=this.resultColumns.map((function(e){return e.fieldName}));return this.validColumns.filter((function(t){return!e.includes(t.fieldName)}))}},watch:{columns:function(){this.validColumns=[],this.resultColumns=[],this.initValidColumns(),this.initPrimaryKey()},resultColumns:{handler:function(e){this.$emit("change",e)},deep:!0}},components:{draggable:d.a},props:{title:{type:String,default:"数据项配置"},isExpand:{type:Boolean,default:!0},voType:{type:String,default:""},value:{type:Array,default:function(){return[]}},colExtraPropertiesSetter:{type:Function,default:function(){}},expandColumnsFilter:{type:Function,default:void 0},validColumnsFilter:{type:Function,default:void 0},needRefEntity:{type:Boolean,default:!0},initColumns:{type:Array,default:void 0},primaryKeyEvent:{type:Boolean,default:!1}},created:function(){this.validColumns=[],this.resultColumns=[],this.initValidColumns(),this.initPrimaryKey()}},p=u,m=(n("ea8f"),n("2877")),f=Object(m["a"])(p,o,i,!1,null,"8f19bbea",null);t["a"]=f.exports},"58de":function(e,t,n){"use strict";n("0947")},"6eb8":function(e,t,n){"use strict";n("e4b7")},7201:function(e,t,n){},8432:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o={updateRecord:["idList"],batchUpdateRecord:["id"],createRecord:["id","idList"]}},"85e1":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-form-model",{ref:"configForm",attrs:{model:e.moduleConfig.metadata,layout:"horizontal",rules:e.rules}},[e.listTables.length>0?[n("h3",{staticClass:"title separator"},[e._v("基础配置")]),n("a-form-model-item",{staticClass:"margin-bottom-0",attrs:{label:"表单模式",labelCol:{span:8},wrapperCol:{span:15}}},[n("a-select",{staticStyle:{width:"100%"},on:{change:e.switchFormType},model:{value:e.moduleConfig.metadata.formType,callback:function(t){e.$set(e.moduleConfig.metadata,"formType",t)},expression:"moduleConfig.metadata.formType"}},e._l(e.formTypeKeys,(function(t,o){return n("a-select-option",{key:o,attrs:{value:t}},[e._v("\n          "+e._s(e.formTypeCons[t])+"\n        ")])})),1)],1),n("a-form-model-item",{staticClass:"margin-bottom-0",attrs:{label:"布局列数",labelCol:{span:8},wrapperCol:{span:15}}},[n("a-input-number",{staticStyle:{width:"100%"},attrs:{min:1,max:10,placeholder:"请输入布局列数"},model:{value:e.moduleConfig.metadata.colNumber,callback:function(t){e.$set(e.moduleConfig.metadata,"colNumber",t)},expression:"moduleConfig.metadata.colNumber"}})],1),n("a-form-model-item",{staticClass:"margin-bottom-0",attrs:{label:"提交按钮",labelCol:{span:8},wrapperCol:{span:15}}},[n("a-switch",{attrs:{"checked-children":"显示","un-checked-children":"隐藏"},model:{value:e.moduleConfig.metadata.showSubmitBtn,callback:function(t){e.$set(e.moduleConfig.metadata,"showSubmitBtn",t)},expression:"moduleConfig.metadata.showSubmitBtn"}})],1),n("h3",{staticClass:"title separator"},[e._v("列表实体配置")]),n("a-row",[n("a-col",{attrs:{span:22}},[n("a-form-model-item",{ref:"tableName",staticClass:"margin-bottom-10px",attrs:{prop:"tableName"}},[n("a-select",{staticStyle:{width:"100%"},attrs:{"show-search":"","filter-option":e.filterOption,"default-value":e.listTables[e.listTables.length-1]["tableName"]},on:{change:e.listTableNameChanged},model:{value:e.moduleConfig.metadata.tableName,callback:function(t){e.$set(e.moduleConfig.metadata,"tableName",t)},expression:"moduleConfig.metadata.tableName"}},e._l(e.listTables,(function(t,o){return n("a-select-option",{key:o,attrs:{value:t.tableName}},[e._v("\n              "+e._s(t.objName)+" ["+e._s(t.tableName)+"]\n            ")])})),1)],1)],1)],1)]:e._e(),e.listColumns.length>0?n("column-list-selector-plus",{attrs:{value:e.moduleConfig.metadata.columns,title:"表单项配置","is-expand":!0,"init-columns":e.listColumns,"need-ref-entity":!1,"valid-columns-filter":e.validListColumnsFilter,"col-extra-properties-setter":e.setColExtraProperties,"expand-columns-filter":e.expandColumnsFilter},on:{change:e.onColumnsSelectorChange},scopedSlots:e._u([{key:"item-extra-content",fn:function(t){var o=t.col;return[n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"事件"}},[n("a-radio-group",{on:{change:function(t){return e.onColActionTypeChange(t.target.value,o)}},model:{value:o.actionType,callback:function(t){e.$set(o,"actionType",t)},expression:"col.actionType"}},[n("a-radio",{attrs:{value:""}},[e._v("\n            无\n          ")]),n("a-radio",{attrs:{value:"btnPopWindow"}},[e._v("\n            按钮打开面板弹窗\n          ")])],1)],1),"btnPopWindow"===o.actionType?n("btn-pop-window-panel-selector",{attrs:{code:e.code,"project-type":e.projectType,"btn-window-data-list":e.btnWindowDataList,"panel-list":e.panelList,"extract-all-btn-window-methods":e.extractAllBtnWindowMethods,workspace:e.workspace},on:{updatePanelList:function(t){return e.panelList=t},change:e.onBtnWindowDataChange},model:{value:o.btnWindowData,callback:function(t){e.$set(o,"btnWindowData",t)},expression:"col.btnWindowData"}}):e._e()]}}],null,!1,1131290395)}):e._e(),e.moduleConfig.scriptConfig&&e.hasPermission("f_pc_panel_event_kit")?[n("h3",{staticClass:"title separator"},[e._v("组件事件处理")]),n("event-kit",{attrs:{code:e.code,"script-config":e.moduleConfig.scriptConfig}})]:e._e()],2)},i=[],l=(n("456d"),n("7514"),n("a481"),n("75fc")),a=(n("ac6a"),n("7f57")),c=n("4047"),s=n("8656"),r=n("3aa3"),d=n("6892"),u=n("8432"),p=n("c5e9"),m=n("01bc"),f={name:"GeneralFormConfig",data:function(){return{listTables:[],treeColumns:[],listColumns:[],panelList:void 0,rules:{tableName:[{required:!0,message:"请选择列表实体配置",trigger:"blur"}]},formTypeCons:{updateRecord:"单条更新",batchUpdateRecord:"批量更新",createRecord:"单条新建"}}},methods:{setColExtraProperties:function(e){e.actionType="",e.btnWindowData=void 0},onColActionTypeChange:function(e,t){t.btnWindowData={}},onColumnsSelectorChange:function(e){this.moduleConfig.metadata.columns=_.cloneDeep(e)},onBtnWindowDataChange:function(){var e=this.moduleConfig.scriptConfig.methods.filter((function(e){return"panelExtractor"!==e.origin}));this.moduleConfig.metadata.columns.forEach((function(t){"btnPopWindow"===t.actionType&&t.btnWindowData&&t.btnWindowData.panelConfig&&t.btnWindowData.panelConfig.scriptConfig&&t.btnWindowData.panelConfig.scriptConfig.methods&&e.push.apply(e,Object(l["a"])(t.btnWindowData.panelConfig.scriptConfig.methods))})),this.moduleConfig.scriptConfig.methods=e},extractAllBtnWindowMethods:function(){return Object(m["a"])(this.btnWindowDataList)},switchFormType:function(e){var t,n={updateRecord:[{key:"open",name:"打开表单",params:[{key:"id",name:"当前表单ID",type:"String"}],open:!0,handlerFuncName:"open",handlerCode:"async open (id) {\n  // 获取详情数据\n  const res = await dibootApi.get(`${this.baseApi}/${id}`)\n  if (res.code === 0) {\n    this.model = res.data\n    this.attachMore()\n    this.afterOpen()\n  } else {\n    this.$message.error(res.msg)\n  }\n}"},{key:"enhance",name:"数据处理",params:[],open:!0,handlerFuncName:"enhance",handlerCode:"enhance (values) {\n  return _.assign(this.model, values)\n}"},{key:"submit",name:"提交表单",params:[],open:!0,handlerFuncName:"onSubmit",handlerCode:"async submit () {\n  this.state.confirmSubmit = true\n  let values = await this.validate()\n  values = this.enhance(values)\n  try {\n    const res = await dibootApi.put(`${this.baseApi}/${this.id}`, values)\n    if (res.code === 0) {\n      this.submitSuccess(res)\n      this.open(this.id)\n    } else {\n      this.submitFailed(res)\n    }\n  } catch (e) {\n    // 执行一系列后续操作\n    this.submitFailed(e)\n  }\n}"}],batchUpdateRecord:[{key:"open",name:"打开表单",params:[],open:!0,handlerFuncName:"open",handlerCode:"open () {\n  this.attachMore()\n}"},{key:"submit",name:"提交表单",params:[],open:!0,handlerFuncName:"onSubmit",handlerCode:"async submit () {\n  this.state.confirmSubmit = true\n  const values = await this.validate()\n  try {\n    const res = await dibootApi.post(`${this.baseApi}/batchUpdate`, {\n      data: values,\n      idList: this.idList\n    })\n    if (res.code === 0) {\n      this.submitSuccess(res)\n    } else {\n      this.submitFailed(res)\n    }\n  } catch (e) {\n    // 执行一系列后续操作\n    this.submitFailed(e)\n  }\n}"}],createRecord:[{key:"open",name:"打开表单",params:[],open:!0,handlerFuncName:"open",handlerCode:"open () {\n  this.attachMore()\n}"},{key:"submit",name:"提交表单",params:[],open:!0,handlerFuncName:"onSubmit",handlerCode:"async submit () {\n  this.state.confirmSubmit = true\n  const values = await this.validate()\n  this.enhance(values)\n  try {\n    const res = await dibootApi.post(`${this.baseApi}/`, values)\n    if (res.code === 0) {\n      this.submitSuccess(res)\n    } else {\n      this.submitFailed(res)\n    }\n  } catch (e) {\n    // 执行一系列后续操作\n    this.submitFailed(e)\n  }\n}"}]},o=[{key:"submitSuccess",name:"提交成功",params:[],open:!0,handlerFuncName:"submitSuccess",handlerCode:"submitSuccess (result) {\n  this.$notification.success({\n    message: '操作成功',\n    description: result.msg\n  })\n  this.close()\n  this.form.resetFields()\n  this.$emit('complete')\n}"}],i=n[e];void 0===i&&(i=[]),(t=i).push.apply(t,o);var l=this.moduleConfig.metadata.tableObj.className,a=this.moduleConfig.metadata.tableObj.instClassName;i.forEach((function(e){e.handlerCode=e.handlerCode.replace(/__className__/g,l).replace(/__instClassName__/g,a)})),this.moduleConfig.scriptConfig.event=i;var c={updateRecord:{key:"id",name:"表单ID",type:"String",default:"",required:!0,hasWatch:!0,immediate:!0,watchCode:"function(val) {\n  // 数据更改处理流程\n  this.open(val)\n}"},batchUpdateRecord:{key:"idList",name:"ID列表",type:"Array",default:"",required:!1,hasWatch:!1,immediate:!1,watchCode:"function(val) {\n  // 数据更改处理流程\n}"}},s=c[e];void 0!==s&&d["a"].$emit("addGlobalProp",s);var r=u["a"][e];void 0!==r&&d["a"].$emit("removeGlobalProp",r)},startConfigValidate:function(e){var t=this;this.$refs.configForm.validate((function(n,o){if(n)e();else{var i=t.collectErrMsg(o);e(i)}}))},listTableNameChanged:function(e){var t=this.listTables.find((function(t){return t.tableName===e}));this.moduleConfig.metadata.tableObj=t,this.getListColumns(e),this.switchFormType(this.moduleConfig.metadata.formType)},getListColumns:function(e){var t=this;this.listColumns=[],r["a"].get("/diboot/devtools/db/columns/".concat(e)).then((function(e){0===e.code&&(t.moduleConfig.metadata.columns=[],t.listColumns=e.data)}))},expandColumnsFilter:function(e){return!0},validListColumnsFilter:function(e){return"id"!==e.fieldName&&"uuid"!==e.fieldName&&"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&"createTime"!==e.fieldName&&"updateTime"!==e.fieldName&&"createBy"!==e.fieldName&&"updateBy"!==e.fieldName}},computed:{formTypeKeys:function(){return Object.keys(this.formTypeCons)},btnWindowDataList:function(){return this.moduleConfig.metadata.columns&&0!==this.moduleConfig.metadata.columns.length?this.moduleConfig.metadata.columns.filter((function(e){return"btnPopWindow"===e.actionType})).map((function(e){return e.btnWindowData})):[]}},mixins:[a["a"],s["a"]],components:{columnListSelectorPlus:c["a"],btnPopWindowPanelSelector:p["a"]},mounted:function(){this.$nextTick((function(){var e=this;r["a"].get("/diboot/devtools/db/onlyEditableTables").then((function(t){if(0===t.code&&(e.listTables=t.data,e.listTables.length>0)){var n=e.listTables[0].tableName;try{e.moduleConfig.metadata.tableName?n=e.moduleConfig.metadata.tableName:e.moduleConfig.metadata.tableName=n}catch(o){console.log("通用列表获取当前表名出错",n)}e.listTableNameChanged(n)}}))}))}},h=f,g=(n("6eb8"),n("2877")),b=Object(g["a"])(h,o,i,!1,null,"14e6c4cf",null);t["default"]=b.exports},"862b":function(e,t,n){},8656:function(e,t,n){"use strict";n("8e6e"),n("456d");var o=n("75fc"),i=(n("ac6a"),n("bd86")),l=(n("6762"),n("2fdb"),n("2f62"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t["a"]={methods:{hasPermission:function(e){return 0===this.actionList.length||this.actionList.includes(e)}},computed:c(c({},Object(l["f"])({mainLevel:function(e){return e.user.mainLevel}})),{},{actionList:function(){if(!this.mainLevel||!this.mainLevel.permissions||0===this.mainLevel.permissions.length)return[];var e=[];return this.mainLevel.permissions.forEach((function(t){t.actionList&&t.actionList.length>0&&e.push.apply(e,Object(o["a"])(t.actionList))})),e}})}},c5e9:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-form-model",[n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"名称"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"按钮名称"},model:{value:e.config.name,callback:function(t){e.$set(e.config,"name",t)},expression:"config.name"}})],1),n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"类型"}},["element"===e.projectType?[n("a-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.config.btnType,callback:function(t){e.$set(e.config,"btnType",t)},expression:"config.btnType"}},[n("a-select-option",{attrs:{value:"primary"}},[e._v("\n          主按钮\n        ")]),n("a-select-option",{attrs:{value:"success"}},[e._v("\n          成功按钮\n        ")]),n("a-select-option",{attrs:{value:"info"}},[e._v("\n          信息按钮\n        ")]),n("a-select-option",{attrs:{value:"warning"}},[e._v("\n          警告按钮\n        ")]),n("a-select-option",{attrs:{value:"danger"}},[e._v("\n          危险按钮\n        ")]),n("a-select-option",{attrs:{value:"link"}},[e._v("\n          链接按钮\n        ")])],1)]:[n("a-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.config.btnType,callback:function(t){e.$set(e.config,"btnType",t)},expression:"config.btnType"}},[n("a-select-option",{attrs:{value:"primary"}},[e._v("\n          主按钮类型\n        ")]),n("a-select-option",{attrs:{value:"default"}},[e._v("\n          默认类型\n        ")]),n("a-select-option",{attrs:{value:"link"}},[e._v("\n          链接按钮\n        ")])],1)]],2),n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"图标"}},[n("a-popover",{attrs:{title:"按钮图标选择",placement:"topRight",trigger:"click"}},[n("template",{slot:"content"},[n("icon-selector",{attrs:{"project-type":e.projectType},model:{value:e.config.btnIcon,callback:function(t){e.$set(e.config,"btnIcon",t)},expression:"config.btnIcon"}})],1),n("a-button",{attrs:{type:"link"}},[e._v("\n        设置\n      ")])],2)],1),n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"触发"}},[n("a-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.config.trigger,callback:function(t){e.$set(e.config,"trigger",t)},expression:"config.trigger"}},[n("a-select-option",{attrs:{value:"click"}},[e._v("\n        点击触发\n      ")])],1)],1),n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"事件"}},[n("a-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.config.event,callback:function(t){e.$set(e.config,"event",t)},expression:"config.event"}},[n("a-select-option",{attrs:{value:"click"}},[e._v("\n        执行自定义函数\n      ")]),n("a-select-option",{attrs:{value:"popWindow"}},[e._v("\n        弹出窗口\n      ")])],1)],1),"click"===e.config.event?n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"函数"}},[n("a-popover",{attrs:{placement:"left",title:"@click 按钮点击事件函数",trigger:"click"}},[n("div",{staticStyle:{width:"600px",height:"400px"},attrs:{slot:"content"},slot:"content"},[n("smart-code-editor",{attrs:{code:e.code,workspace:e.workspace},on:{input:function(t){return e.onHandlerCodeChange(t,e.config.clickEvent)}},model:{value:e.config.clickEvent.handlerCode,callback:function(t){e.$set(e.config.clickEvent,"handlerCode",t)},expression:"config.clickEvent.handlerCode"}})],1),n("a-button",{staticStyle:{margin:"10px 0"},attrs:{block:"",type:"primary",size:"small"}},[e._v("\n        编辑自定义函数\n      ")])],1)],1):e._e(),"popWindow"===e.config.event?n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"类型"}},[n("a-select",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:e.config.windowType,callback:function(t){e.$set(e.config,"windowType",t)},expression:"config.windowType"}},[n("a-select-option",{attrs:{value:"modal"}},[e._v("\n        模态框\n      ")])],1)],1):e._e(),"popWindow"===e.config.event?n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"标题"}},[n("a-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"弹窗标题"},model:{value:e.config.windowTitle,callback:function(t){e.$set(e.config,"windowTitle",t)},expression:"config.windowTitle"}})],1):e._e(),"popWindow"===e.config.event?n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:"宽度"}},[n("a-slider",{attrs:{defaultValue:1200,min:300,max:2e3,step:10},model:{value:e.config.windowWidth,callback:function(t){e.$set(e.config,"windowWidth",t)},expression:"config.windowWidth"}})],1):e._e(),"popWindow"===e.config.event?n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:8},wrapperCol:{span:16},label:"确认事件"}},[n("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"未启用"},model:{value:e.config.confirmEvent.open,callback:function(t){e.$set(e.config.confirmEvent,"open",t)},expression:"config.confirmEvent.open"}})],1):e._e(),"popWindow"===e.config.event&&e.config.confirmEvent.open?n("a-form-model-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"函数"}},[n("a-popover",{attrs:{placement:"left",title:"@confirm 弹框确认事件函数",trigger:"click"}},[n("div",{staticStyle:{width:"600px",height:"400px"},attrs:{slot:"content"},slot:"content"},[n("smart-code-editor",{attrs:{code:e.code,workspace:e.workspace,"extra-method-obj-list":e.extraMethodObjList},on:{input:function(t){return e.onHandlerCodeChange(t,e.config.confirmEvent)}},model:{value:e.config.confirmEvent.handlerCode,callback:function(t){e.$set(e.config.confirmEvent,"handlerCode",t)},expression:"config.confirmEvent.handlerCode"}})],1),n("a-button",{staticStyle:{margin:"10px 0"},attrs:{block:"",type:"primary",size:"small"}},[e._v("\n        编辑自定义函数\n      ")])],1)],1):e._e(),void 0!==e.panelConfig&&"popWindow"===e.config.event?n("general-panel-config",{attrs:{"panel-list":e.panelList,"extract-panel-extra-methods":e.extractAllBtnWindowMethods,"append-extra-panel-config":e.appendExtraPanelConfig,code:e.code,workspace:e.workspace},on:{change:e.onPanelChanged,updatePanelList:function(t){return e.$emit("updatePanelList",t)}},model:{value:e.panelConfig,callback:function(t){e.panelConfig=t},expression:"panelConfig"}}):e._e()],1)},i=[],l=(n("7f7f"),n("541c")),a={name:"自定义",btnType:"primary",btnIcon:"",trigger:"click",event:"popWindow",windowType:"modal",windowTitle:"",windowWidth:1200,windowRefName:"",panelRefName:"",clickEvent:{key:"click",name:"选择当前节点",params:[],open:!0,handlerFuncName:"onButtonClick",handlerCode:"onButtonClick() {\n  // 确认按钮点击事件处理代码（方法名不能重复）\n}"},confirmEvent:{key:"confirm",name:"选择当前节点",params:[],open:!1,handlerFuncName:"onConfirm",handlerCode:"onConfirm() {\n  // 确认弹窗事件处理代码\n}"},panelConfig:{}},c=n("2ef0"),s=n.n(c),r=n("085b"),d=n("1ca6"),u=n("788b"),p=n("d099"),m=n("218b"),f={name:"BtnPopWindowPanelSelector",data:function(){return{panelConfig:void 0,extraMethodObjList:[]}},methods:{onHandlerCodeChange:function(e,t){t.handlerFuncName=Object(l["a"])(e)},onPanelChanged:function(e){this.config.panelConfig=s.a.cloneDeep(e),this.$emit("change",this.config)},appendExtraPanelConfig:function(e){e.refName?e.windowRefName="".concat(e.refName,"Window"):e.windowRefName=""},initConfig:function(e){if(!(e&&e.panelConfig&&e.panelConfig.refName))return this.panelConfig={},!1;this.panelConfig=s.a.cloneDeep(e.panelConfig)}},components:{propsKit:r["a"],eventKit:d["a"],smartCodeEditor:u["a"],iconSelector:p["a"],generalPanelConfig:m["a"]},mounted:function(){this.$nextTick((function(){void 0!==this.config&&this.config.name?this.initConfig(this.config):(this.$emit("change",s.a.cloneDeep(a)),this.panelConfig=s.a.cloneDeep(a.panelConfig))}))},model:{prop:"config",event:"change"},props:{config:{type:Object,default:function(){return s.a.cloneDeep(a)}},workspace:{type:String,default:"panelDesigner"},code:{type:String,default:""},projectType:{type:String,required:!0},btnWindowDataList:{type:Array,default:function(){return[]}},panelList:{type:Array,default:void 0},extractAllBtnWindowMethods:{type:Function,required:!0}}},h=f,g=n("2877"),b=Object(g["a"])(h,o,i,!1,null,null,null);t["a"]=b.exports},d099:function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-form",{attrs:{layout:"vertical"}},[n("a-form-item",[n("a-input",{attrs:{placeholder:"输入或点击下方图标选择"},model:{value:e.inputIcon,callback:function(t){e.inputIcon=t},expression:"inputIcon"}})],1),n("a-form-item",[n("a-row",{staticStyle:{"max-height":"240px",width:"420px","overflow-y":"scroll"}},["antdv"===e.projectType?e._l(e.iconsMap["antdv"],(function(t){return n("a-col",{key:t,staticClass:"icon-col",class:{current:e.currentIcon===t},attrs:{span:2},on:{click:function(n){return e.changeIcon(t)}}},[n("a-icon",{attrs:{type:t}})],1)})):e._e(),"element"===e.projectType?e._l(e.iconsMap["element"],(function(t){return n("a-col",{key:t,staticClass:"icon-col icon-element",class:{current:e.currentIcon===t},attrs:{span:2},on:{click:function(n){return e.changeIcon(t)}}},[n("i",{class:t})])})):e._e()],2)],1)],1)},i=[],l={antdv:["account-book","alert","api","appstore","audio","bank","bell","book","bug","bulb","calculator","build","calendar","camera","car","carry-out","cloud","code","compass","contacts","container","control","credit-card","crown","customer-service","dashboard","database","dislike","environment","experiment","eye-invisible","eye","file-add","file-excel","file-exclamation","file-image","file-markdown","file-pdf","file-ppt","file-text","file-unknown","file-word","file-zip","file","filter","fire","flag","folder-add","folder","folder-open","frown","funnel-plot","gift","hdd","heart","home","hourglass","idcard","insurance","interaction","layout","like","lock","mail","medicine-box","meh","message","mobile","money-collect","pay-circle","notification","phone","picture","play-square","printer","profile","project","pushpin","property-safety","read","reconciliation","red-envelope","rest","rocket","safety-certificate","save","schedule","security-scan","setting","shop","shopping","skin","smile","sound","star","switcher","tablet","tag","tags","tool","thunderbolt","trophy","unlock","usb","video-camera","wallet","apartment","audit","barcode","bars","block","border","branches","ci","cloud-download","cloud-server","cloud-sync","cloud-upload","cluster","coffee","copyright","deployment-unit","desktop","disconnect","dollar","download","ellipsis","euro","exception","export","file-done","file-jpg","file-protect","file-sync","file-search","fork","gateway","global","gold","history","import","inbox","key","laptop","link","line","loading-3-quarters","loading","man","menu","monitor","more","number","percentage","paper-clip","pound","poweroff","pull-request","qrcode","reload","safety","robot","scan","search","select","shake","share-alt","shopping-cart","solution","sync","table","team","to-top","trademark","transaction","upload","user-add","user-delete","usergroup-add","user","usergroup-delete","wifi","woman"],element:["el-icon-platform-eleme","el-icon-eleme","el-icon-delete-solid","el-icon-delete","el-icon-s-tools","el-icon-setting","el-icon-user-solid","el-icon-user","el-icon-phone","el-icon-phone-outline","el-icon-more","el-icon-more-outline","el-icon-star-on","el-icon-star-off","el-icon-s-goods","el-icon-goods","el-icon-warning","el-icon-warning-outline","el-icon-question","el-icon-info","el-icon-remove","el-icon-circle-plus","el-icon-success","el-icon-error","el-icon-zoom-in","el-icon-zoom-out","el-icon-remove-outline","el-icon-circle-plus-outline","el-icon-circle-check","el-icon-circle-close","el-icon-s-help","el-icon-help","el-icon-minus","el-icon-plus","el-icon-check","el-icon-close","el-icon-picture","el-icon-picture-outline","el-icon-picture-outline-round","el-icon-upload","el-icon-upload2","el-icon-download","el-icon-camera-solid","el-icon-camera","el-icon-video-camera-solid","el-icon-video-camera","el-icon-message-solid","el-icon-bell","el-icon-s-cooperation","el-icon-s-order","el-icon-s-platform","el-icon-s-fold","el-icon-s-unfold","el-icon-s-operation","el-icon-s-promotion","el-icon-s-home","el-icon-s-release","el-icon-s-ticket","el-icon-s-management","el-icon-s-open","el-icon-s-shop","el-icon-s-marketing","el-icon-s-flag","el-icon-s-comment","el-icon-s-finance","el-icon-s-claim","el-icon-s-custom","el-icon-s-opportunity","el-icon-s-data","el-icon-s-check","el-icon-s-grid","el-icon-menu","el-icon-share","el-icon-d-caret","el-icon-caret-left","el-icon-caret-right","el-icon-caret-bottom","el-icon-caret-top","el-icon-bottom-left","el-icon-bottom-right","el-icon-back","el-icon-right","el-icon-bottom","el-icon-top","el-icon-top-left","el-icon-top-right","el-icon-arrow-left","el-icon-arrow-right","el-icon-arrow-down","el-icon-arrow-up","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-video-pause","el-icon-video-play","el-icon-refresh","el-icon-refresh-right","el-icon-refresh-left","el-icon-finished","el-icon-sort","el-icon-sort-up","el-icon-sort-down","el-icon-rank","el-icon-loading","el-icon-view","el-icon-c-scale-to-original","el-icon-date","el-icon-edit","el-icon-edit-outline","el-icon-folder","el-icon-folder-opened","el-icon-folder-add","el-icon-folder-remove","el-icon-folder-delete","el-icon-folder-checked","el-icon-tickets","el-icon-document-remove","el-icon-document-delete","el-icon-document-copy","el-icon-document-checked","el-icon-document","el-icon-document-add","el-icon-printer","el-icon-paperclip","el-icon-takeaway-box","el-icon-search","el-icon-monitor","el-icon-attract","el-icon-mobile","el-icon-scissors","el-icon-umbrella","el-icon-headset","el-icon-brush","el-icon-mouse","el-icon-coordinate","el-icon-magic-stick","el-icon-reading","el-icon-data-line","el-icon-data-board","el-icon-pie-chart","el-icon-data-analysis","el-icon-collection-tag","el-icon-film","el-icon-suitcase","el-icon-suitcase-1","el-icon-receiving","el-icon-collection","el-icon-files","el-icon-notebook-1","el-icon-notebook-2","el-icon-toilet-paper","el-icon-office-building","el-icon-school","el-icon-table-lamp","el-icon-house","el-icon-no-smoking","el-icon-smoking","el-icon-shopping-cart-full","el-icon-shopping-cart-1","el-icon-shopping-cart-2","el-icon-shopping-bag-1","el-icon-shopping-bag-2","el-icon-sold-out","el-icon-sell","el-icon-present","el-icon-box","el-icon-bank-card","el-icon-money","el-icon-coin","el-icon-wallet","el-icon-discount","el-icon-price-tag","el-icon-news","el-icon-guide","el-icon-male","el-icon-female","el-icon-thumb","el-icon-cpu","el-icon-link","el-icon-connection","el-icon-open","el-icon-turn-off","el-icon-set-up","el-icon-chat-round","el-icon-chat-line-round","el-icon-chat-square","el-icon-chat-dot-round","el-icon-chat-dot-square","el-icon-chat-line-square","el-icon-message","el-icon-postcard","el-icon-position","el-icon-turn-off-microphone","el-icon-microphone","el-icon-close-notification","el-icon-bangzhu","el-icon-time","el-icon-odometer","el-icon-crop","el-icon-aim","el-icon-switch-button","el-icon-full-screen","el-icon-copy-document","el-icon-mic","el-icon-stopwatch","el-icon-medal-1","el-icon-medal","el-icon-trophy","el-icon-trophy-1","el-icon-first-aid-kit","el-icon-discover","el-icon-place","el-icon-location","el-icon-location-outline","el-icon-location-information","el-icon-add-location","el-icon-delete-location","el-icon-map-location","el-icon-alarm-clock","el-icon-timer","el-icon-watch-1","el-icon-watch","el-icon-lock","el-icon-unlock","el-icon-key","el-icon-service","el-icon-mobile-phone","el-icon-bicycle","el-icon-truck","el-icon-ship","el-icon-basketball","el-icon-football","el-icon-soccer","el-icon-baseball","el-icon-wind-power","el-icon-light-rain","el-icon-lightning","el-icon-heavy-rain","el-icon-sunrise","el-icon-sunrise-1","el-icon-sunset","el-icon-sunny","el-icon-cloudy","el-icon-partly-cloudy","el-icon-cloudy-and-sunny","el-icon-moon","el-icon-moon-night","el-icon-dish","el-icon-dish-1","el-icon-food","el-icon-chicken","el-icon-fork-spoon","el-icon-knife-fork","el-icon-burger","el-icon-tableware","el-icon-sugar","el-icon-dessert","el-icon-ice-cream","el-icon-hot-water","el-icon-water-cup","el-icon-coffee-cup","el-icon-cold-drink","el-icon-goblet","el-icon-goblet-full","el-icon-goblet-square","el-icon-goblet-square-full","el-icon-refrigerator","el-icon-grape","el-icon-watermelon","el-icon-cherry","el-icon-apple","el-icon-pear","el-icon-orange","el-icon-coffee","el-icon-ice-tea","el-icon-ice-drink","el-icon-milk-tea","el-icon-potato-strips","el-icon-lollipop","el-icon-ice-cream-square","el-icon-ice-cream-round"]},a={name:"IconSelector",data:function(){return{iconsMap:l,inputIcon:""}},methods:{changeIcon:function(e){this.inputIcon=e,this.$emit("change",e)}},watch:{inputIcon:function(e){e!==this.currentIcon&&this.$emit("change",e)}},model:{prop:"currentIcon",event:"change"},props:{currentIcon:{type:String,default:""},projectType:{type:String,default:""}},created:function(){this.inputIcon=this.currentIcon}},c=a,s=(n("58de"),n("2877")),r=Object(s["a"])(c,o,i,!1,null,"443add4a",null);t["a"]=r.exports},dc04:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-form",{attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title separator"},[e._v("基础配置")]),n("a-form-model",{attrs:{layout:"horizontal"}},[n("a-form-model-item",{attrs:{label:"布局列数",labelCol:{span:8},wrapperCol:{span:12}}},[n("a-input-number",{staticStyle:{"padding-left":"10px"},attrs:{min:1,max:10,placeholder:"请输入布局列数"},model:{value:e.moduleConfig.metadata.colNumber,callback:function(t){e.$set(e.moduleConfig.metadata,"colNumber",t)},expression:"moduleConfig.metadata.colNumber"}})],1)],1),n("column-list-selector-plus",{attrs:{"need-ref-entity":!0,"valid-columns-filter":e.validColumnsFilter,title:"详情项配置","vo-type":"DetailVO","is-expand":!0,"col-extra-properties-setter":e.setColExtraProperties,"expand-columns-filter":e.expandColumnsFilter},on:{change:function(t){e.moduleConfig.metadata.columns=e._.cloneDeep(t)}},scopedSlots:e._u([{key:"item-extra-content",fn:function(t){var o=t.col;return[n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"事件"}},[n("a-radio-group",{model:{value:o.actionType,callback:function(t){e.$set(o,"actionType",t)},expression:"col.actionType"}},[n("a-radio",{attrs:{value:""}},[e._v("\n            无\n          ")]),n("a-radio",{attrs:{value:"qrCode"}},[e._v("\n            展示为二维码\n          ")])],1)],1),"qrCode"===o.actionType?n("a-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{labelCol:{span:6},wrapperCol:{span:17},label:"尺寸"}},[n("a-input-number",{attrs:{size:"small",min:30,max:500,"default-value":120,step:10},model:{value:o.qrCodeSize,callback:function(t){e.$set(o,"qrCodeSize",t)},expression:"col.qrCodeSize"}})],1):e._e()]}}])}),e.moduleConfig.scriptConfig?[n("h3",{staticClass:"title separator"},[e._v("组件事件处理")]),n("event-kit",{attrs:{code:e.code,"script-config":e.moduleConfig.scriptConfig}})]:e._e()],2)},i=[],l=n("e5b5"),a=n("4047"),c={name:"DetailPanelConfig",data:function(){return{}},methods:{setColExtraProperties:function(e){e.actionType="",e.qrCodeSize=120},expandColumnsFilter:function(e){return!e.columnExt||"Boolean"!==e.fieldPackagingType&&"S_IMG_UPLOAD"!==e.columnExt.formType&&"M_IMG_UPLOAD"!==e.columnExt.formType&&"S_FILE_UPLOAD"!==e.columnExt.formType&&"M_FILE_UPLOAD"!==e.columnExt.formType&&"RICH_EDITOR"!==e.columnExt.formType},validColumnsFilter:function(e){return"id"!==e.fieldName&&"uuid"!==e.fieldName&&"isDeleted"!==e.fieldName&&"extdata"!==e.fieldName&&!e.columnExt.refType}},mixins:[l["a"]],components:{columnListSelectorPlus:a["a"]}},s=c,r=(n("35d9"),n("2877")),d=Object(r["a"])(s,o,i,!1,null,"e7dd987c",null);t["default"]=d.exports},e4b7:function(e,t,n){},ea8f:function(e,t,n){"use strict";n("7201")}}]);