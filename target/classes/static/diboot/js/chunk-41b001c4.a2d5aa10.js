(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41b001c4"],{"01c1":function(e,t,n){"use strict";n("2b7b")},"03cd":function(e,t,n){!function(t,n){e.exports=n()}(0,(function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,n){"use strict";function o(){var e=document.documentElement;return"requestFullscreen"in e||"mozRequestFullScreen"in e&&document.mozFullScreenEnabled||"msRequestFullscreen"in e&&document.msFullscreenEnabled||"webkitRequestFullScreen"in e}function i(){return!!(document.fullscreen||document.mozFullScreen||document.fullscreenElement||document.msFullscreenElement||document.webkitIsFullScreen)}function r(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.log("Fullscreen API is not supported.")}function a(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():console.log("Fullscreen API is not supported.")}function c(e){document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e),document.addEventListener("webkitfullscreenchange",e)}function l(e){document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),document.removeEventListener("webkitfullscreenchange",e)}function s(){var e={},t=!1,n=0,o=arguments.length;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);n<o;n++){var i=arguments[n];!function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t&&"[object Object]"===Object.prototype.toString.call(n[o])?e[o]=s(!0,e[o],n[o]):e[o]=n[o])}(i)}return e}t.b=o,t.c=i,t.g=r,t.d=a,t.f=c,t.e=l,t.a=s},function(e,t,n){"use strict";function o(){return n.i(c.c)()}function i(e,t,n){s&&(void 0===n?o()?a():r(e,t):n?r(e,t):a())}function r(){function e(){var t=o();t||(n.i(c.e)(e),r.classList.remove(i.fullscreenClass),i.wrap&&(a.parentNode.insertBefore(r,a),a.parentNode.removeChild(a))),i.callback&&i.callback(t)}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,i=arguments[1];if(s&&!o()){i=n.i(c.a)(!0,{},l,i);var r=t,a=void 0;i.wrap&&(a=document.createElement("div"),a.style["overflow-y"]="auto",a.style.background=i.background,a.style.width="100%",a.style.height="100%",r.parentNode.insertBefore(a,r),a.appendChild(r),a.addEventListener("click",(function(e){e.target===this&&n.i(c.d)()}))),r.classList.add(i.fullscreenClass),n.i(c.f)(e),n.i(c.g)(i.wrap?a:r)}}function a(){s&&o()&&n.i(c.d)()}var c=n(0),l={wrap:!0,background:"#333",callback:function(){},fullscreenClass:"fullscreen"},s=n.i(c.b)();t.a={getState:o,support:s,toggle:i,enter:r,exit:a}},function(e,t,n){var o=n(5)(n(4),n(6),null,null);e.exports=o.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n.n(o),r=n(1),a=n(0);t.default={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.name||"fullscreen";e.component(o,n.i(a.a)(i.a,{name:o})),e.prototype["$"+o]=r.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0);t.default={props:{background:{type:String,default:"#333"},fullscreenClass:{type:String,default:"fullscreen"},fullscreen:{type:Boolean,default:!1}},data:function(){return{supportFullScreen:!1,isFullscreen:!1}},computed:{wrapperStyle:function(){return{background:this.background,"overflow-y":"auto",width:"100%",height:"100%"}}},methods:{toggle:function(e){void 0===e?n.i(o.c)()?this.exit():this.enter():e?this.enter():this.exit()},enter:function(){this.supportFullScreen&&(n.i(o.f)(this.fullScreenCallback),n.i(o.g)(this.$el))},exit:function(){this.supportFullScreen&&this.getState()&&n.i(o.d)()},getState:function(){return n.i(o.c)()},shadeClick:function(e){e.target===this.$el&&this.exit()},fullScreenCallback:function(){this.isFullscreen=n.i(o.c)(),this.isFullscreen||n.i(o.e)(this.fullScreenCallback),this.$emit("change",this.isFullscreen),this.$emit("update:fullscreen",this.isFullscreen)}},watch:{fullscreen:function(e){e!==n.i(o.c)()&&(e?this.enter():this.exit())}},created:function(){this.supportFullScreen=n.i(o.b)()}}},function(e,t){e.exports=function(e,t,n,o){var i,r=e=e||{},a=typeof e.default;"object"!==a&&"function"!==a||(i=e,r=e.default);var c="function"==typeof r?r.options:r;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns),n&&(c._scopeId=n),o){var l=Object.create(c.computed||null);Object.keys(o).forEach((function(e){var t=o[e];l[e]=function(){return t}})),c.computed=l}return{esModule:i,exports:r,options:c}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.isFullscreen?[e.fullscreenClass]:[],style:e.isFullscreen?[e.wrapperStyle]:[],on:{click:function(t){return e.shadeClick(t)}}},[e._t("default")],2)},staticRenderFns:[]}}])}))},"1f09":function(e,t,n){},"2b7b":function(e,t,n){},"4f70":function(e,t,n){},"5bd9":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("draggable",{staticClass:"module-screen",class:{root:"root"===e.type,null:!e.targetList||0===e.targetList.length,preview:"preview"===e.code},attrs:{element:"div","ghost-class":"sortable-ghost",animation:340,options:{group:{name:"compgroup",pull:!1},sort:!0}},on:{add:e.addModule},model:{value:e.targetList,callback:function(t){e.targetList=t},expression:"targetList"}},e._l(e.targetList,(function(t,o){return n("div",{key:t.uuid,staticClass:"component-box",class:{current:e.currentModule.uuid===t.uuid}},[t.uuid?n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"item.hidden === undefined || !item.hidden"}],tag:"component",staticClass:"preview-element",class:{current:e.currentModule.uuid===t.uuid},attrs:{uuid:t.uuid,code:e.code,"project-type":e.projectType},nativeOn:{click:function(n){return n.stopPropagation(),e.changeCurrentModule(n,t)}}}):e._e(),n("div",{staticClass:"component-item-operate-box",class:{right:"left"!==e.previewBtnGroupAlign,left:"left"===e.previewBtnGroupAlign}},["layoutc"!==t.mark?n("a",{staticClass:"btn-icon",attrs:{title:"复制",href:"javascript:;"},on:{click:function(n){return n.stopPropagation(),e.copyModule(t,o)}}},[n("a-icon",{attrs:{type:"copy"}})],1):e._e(),n("a",{staticClass:"btn-icon",attrs:{title:"删除",href:"javascript:;"},on:{click:function(t){return t.stopPropagation(),e.removeModule(o)}}},[n("a-icon",{attrs:{type:"delete"}})],1)])],1)})),0)},i=[],r=(n("8e6e"),n("456d"),n("ac6a"),n("7514"),n("96cf"),n("3b8d")),a=n("bd86"),c=n("2f62"),l=n("381a"),s=n.n(l),u=n("2ef0"),d=n.n(u),p=n("310e"),f=n.n(p),m=n("6892");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=Object(c["a"])("DragConfig"),v=b.mapMutations,y=b.mapActions,w={name:"workPanel",data:function(){return{targetList:[],componentMap:{}}},methods:h(h(h({},v(["setModuleConfig","removeConfig","updateConfigMap"])),y({modifyCurrentModule:"modifyCurrentModule",setModuleConfig:"setModuleConfig"})),{},{addModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.item._underlying_vm_,o={mark:n.mark},i=t.newIndex,e.next=5,this.addModuleObj(o,i);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addModuleObj:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,o){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.uuid=s()(16,{numbers:!1}),this.loadModule(t),e.next=4,this.modifyCurrentModule({key:this.code,module:t});case 4:i=void 0!==o&&o?0:1,this.targetList.splice(n,i,t),this.targetList=this.targetList.filter((function(e){return void 0!==e.uuid})),this.$emit("add",t),this.$emit("input",this.targetList),this.$forceUpdate();case 10:case"end":return e.stop()}}),e,this)})));function t(t,n,o){return e.apply(this,arguments)}return t}(),autoAppendModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.targetList.find((function(e){return e.mark===t})),void 0===n){e.next=3;break}return e.abrupt("return",!1);case 3:return o={mark:t,hidden:!0},e.next=6,this.addModuleObj(o,0,!0);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),copyModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=d.a.cloneDeep(t),o.uuid=s()(16,{numbers:!1}),i=d.a.cloneDeep(this.moduleConfigMap[t.uuid]),i.uuid=o.uuid,this.setModuleConfig({key:this.code,uuid:o.uuid,config:i}),this.targetList.splice(n+1,0,o),r=d.a.cloneDeep(this.targetList),e.next=9,this.modifyCurrentModule({key:this.code,module:o});case 9:this.$emit("add",o),this.$emit("input",r),this.$forceUpdate();case 12:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),removeModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=d.a.cloneDeep(this.targetList[t]),o=void 0!==this.targetList[t-1]?this.targetList[t-1]:this.targetList[t+1],void 0===o){e.next=5;break}return e.next=5,this.modifyCurrentModule({key:this.code,module:o});case 5:i=this.targetList[t]["uuid"],this.removeConfig({key:this.code,uuid:i}),this.targetList.splice(t,1),r=d.a.cloneDeep(this.targetList),this.$emit("remove",{m:n,targetList:r}),this.$emit("input",r);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadModule:function(e){var t=this.componentMap[e.mark];t||(this.componentMap[e.mark]=function(){return n("f95a")("./".concat(e.mark,"/index.vue"))})},autoRemoveModule:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.targetList.find((function(e){return e.mark===t})),void 0!==n){e.next=3;break}return e.abrupt("return",!1);case 3:if(o=this.targetList.indexOf(n),-1!==o){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,this.removeModule(o);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),autoSetModuleConfig:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,o){var i,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.targetList.find((function(e){return e.mark===t})),void 0!==i){e.next=4;break}return e.next=4,this.autoAppendModule(t);case 4:if(i=this.targetList.find((function(e){return e.mark===t})),void 0!==i){e.next=7;break}return e.abrupt("return",!1);case 7:r=i.uuid,a=this.$store.state.DragConfig[this.code].moduleConfigMap,a[r]=n,this.updateConfigMap({key:this.code,configMap:a}),o&&o(i);case 12:case"end":return e.stop()}}),e,this)})));function t(t,n,o){return e.apply(this,arguments)}return t}(),changeCurrentModule:function(e,t){"layoutc"!==t.mark&&e.preventDefault(),this.modifyCurrentModule({key:this.code,module:t}),m["a"].$emit("switchModuleConfigPanel_".concat(this.code))},clearModuleListConfig:function(e){var t=this;!e||e.length<0||e.forEach((function(e){t.removeModuleConfig(e)}))},removeModuleConfig:function(e){this.removeConfig({key:this.code,uuid:e.uuid})}}),watch:{targetList:function(e){"preview"!==this.code&&this.$emit("input",e)}},computed:h(h({},Object(c["f"])({previewBtnGroupAlign:function(e){return e.customProperties.designer.previewBtnGroupAlign}})),{},{currentModule:function(){return this.$store.state.DragConfig[this.code].currentModule},moduleConfigMap:function(){return this.$store.state.DragConfig[this.code].moduleConfigMap}}),mounted:function(){this.targetList=d.a.cloneDeep(this.value)},props:{value:{type:Array,default:function(){return[]}},type:{type:String,default:""},code:{type:String,default:""},projectType:{type:String,required:!0},beforeModuleJoinValidate:{type:Function,default:function(){return!0}}},components:{draggable:f.a},created:function(){var e=this;"root"===this.type&&(m["a"].$on("autoAppendModule_".concat(this.code),function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.autoAppendModule(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m["a"].$on("autoRemoveModule_".concat(this.code),function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.autoRemoveModule(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),m["a"].$on("autoSetModuleConfig_".concat(this.code),(function(t){var n=t.mark,o=t.moduleConfig,i=t.callback;e.autoSetModuleConfig(n,o,i)})))},destroyed:function(){this.clearModuleListConfig(this.targetList),"root"===this.type&&(m["a"].$off("autoAppendModule_".concat(this.code)),m["a"].$off("autoRemoveModule_".concat(this.code)),m["a"].$off("autoSetModuleConfig_".concat(this.code)))}},k=w,C=(n("c9be"),n("2877")),M=Object(C["a"])(k,o,i,!1,null,"347dac08",null);t["a"]=M.exports},"5d22":function(e,t,n){"use strict";n("1f09")},6726:function(e,t,n){"use strict";n("4f70")},"744d":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-main"},[e.loadTableFlag?e._e():n("div",{staticClass:"tableListSearch",class:{initial:e.initial,complete:!e.initial,middleState:!e.initial&&!e.loadTableFlag}},[e.initial?n("a-row",[n("a-col",{attrs:{span:24}},[!0===e.hasIam?n("h2",{staticClass:"tableListSearch__title"},[e._v("选择主表开始生成")]):n("h2",{staticClass:"tableListSearch__title"},[e._v("请引入IAM组件，才可以使用前端功能生成")])])],1):e._e(),!0===e.hasIam?n("table-list-search",{attrs:{"hide-init-table":!0},on:{tableChanged:function(t){return e.changeCurrentTable(t)}}}):e._e()],1),n("div",{staticClass:"designer-container",class:{complete:e.loadTableFlag}},[n("a-form",{staticClass:"main-form",staticStyle:{background:"#e8f1ff"},attrs:{layout:"inline"}},[n("a-form-item"),n("a-form-item",{attrs:{label:"当前主表",required:!0}},[e._v("\n        "+e._s(e.currentTableObj.tableName)+"["+e._s(e.currentTableObj.objName)+"]\n        "),n("a-popconfirm",{attrs:{placement:"bottomRight","ok-text":"确认","cancel-text":"取消"},on:{confirm:function(t){return e.reload()}}},[n("template",{slot:"title"},[n("p",{staticStyle:{"margin-bottom":"0"}},[e._v("您确定更改当前表吗？")]),n("p",{staticStyle:{"margin-bottom":"0",color:"#fc5352"}},[e._v("确认后现有设置将丢失！")])]),n("a-button",{attrs:{type:"link",size:"small",icon:"edit"}})],2)],1),n("a-form-item",{attrs:{label:"项目类型",required:!0}},[n("a-select",{staticClass:"w-200",attrs:{placeholder:"请选择项目类型"},model:{value:e.projectType,callback:function(t){e.projectType=t},expression:"projectType"}},[n("a-select-option",{attrs:{value:"antdv"}},[e._v("\n            diboot-antd-admin\n          ")]),n("a-select-option",{attrs:{value:"element"}},[e._v("\n            diboot-element-admin\n          ")])],1)],1),n("a-form-item",{attrs:{required:!0}},[n("span",{attrs:{slot:"label"},slot:"label"},[e._v("\n          上级菜单 \n          "),n("a-icon",{style:{borderRadius:"50%",border:"1px solid #1890ff",color:"#1890ff"},attrs:{type:"plus"},on:{click:function(t){return e.$refs.routerCreateModal.open()}}})],1),n("a-select",{staticClass:"w-200",attrs:{placeholder:"请选择上级菜单"},model:{value:e.parentMenuCode,callback:function(t){e.parentMenuCode=t},expression:"parentMenuCode"}},[e.menuList&&e.menuList.length>0?e._l(e.menuList,(function(t){return n("a-select-option",{key:t.resourceCode,attrs:{value:'{"moduleName": "'+t.resourceCode+'", "moduleTitle": "'+t.displayName+'", "id": '+t.id+"}"}},[e._v("\n              "+e._s(t.displayName)+"\n            ")])})):e._e()],2)],1),n("a-form-item",{attrs:{label:"当前菜单名称",required:!0}},[n("a-input",{model:{value:e.currentMenuName,callback:function(t){e.currentMenuName=t},expression:"currentMenuName"}})],1),e.initial?e._e():n("a-form-item",[n("a-button",{directives:[{name:"permission",rawName:"v-permission",value:["f_pc_page_generate"],expression:"['f_pc_page_generate']"}],attrs:{type:"primary",loading:e.loading,icon:"snippets"},on:{click:e.generate}},[e._v("\n          生成相关代码\n        ")])],1)],1),n("fs",{ref:"fullscreen",attrs:{wrap:!0},on:{change:e.fullscreenChange}},[e.currentPanes&&e.currentPanes.length>0?n("a-tabs",{attrs:{id:"designer-main",type:"editable-card",hideAdd:!0,"tab-bar-gutter":12},on:{edit:e.onEdit},model:{value:e.currentPaneKey,callback:function(t){e.currentPaneKey=t},expression:"currentPaneKey"}},[e._l(e.currentPanes,(function(t){return[n("a-tab-pane",{directives:[{name:"permission",rawName:"v-permission",value:["pc_page_p_"+t.code],expression:"[`pc_page_p_${pane.code}`]"}],key:t.code,attrs:{closable:t.closable}},[n("span",{attrs:{slot:"tab"},slot:"tab"},[n("a-icon",{attrs:{type:t.icon}}),e._v("\n              "+e._s(t.name)+"\n                  \n            ")],1),n("pc-designer",{ref:"pc_designer_"+t.code,refInFor:!0,attrs:{code:t.code,"init-module-mark-list":t.moduleList,"project-type":e.projectType},on:{add:e.addModule,remove:e.removeModule,change:function(n){return e.moduleListChanged(t.code,n)}}})],1)]})),n("template",{slot:"tabBarExtraContent"},[n("a-icon",{staticStyle:{margin:"0","margin-right":"12px","font-size":"24px",cursor:"pointer"},attrs:{title:"添加",type:"plus"},on:{click:e.addPane}}),n("a-popover",{attrs:{placement:"leftTop",title:"常用设置",trigger:"click"}},[n("div",{staticStyle:{width:"280px",height:"120px"},attrs:{slot:"content"},slot:"content"},[n("a-form-model",e._b({attrs:{layout:"horizontal"}},"a-form-model",{labelCol:{span:12},wrapperCol:{span:12}},!1),[n("a-form-model-item",{attrs:{label:"操作按钮对齐方式"}},[n("a-radio-group",{attrs:{value:e.previewBtnGroupAlign},on:{change:function(t){return e.$store.commit("SET_DESINGER_PREVIEW_BTN_GROUP_ALIGN",t.target.value)}}},[n("a-radio-button",{attrs:{value:"left"}},[n("a-icon",{attrs:{type:"align-left"}})],1),n("a-radio-button",{attrs:{value:"right"}},[n("a-icon",{attrs:{type:"align-right"}})],1)],1)],1)],1)],1),n("a-icon",{staticStyle:{margin:"0","margin-right":"12px","font-size":"24px",cursor:"pointer"},attrs:{title:"设置",type:"setting"}})],1),n("a-icon",{staticStyle:{margin:"0","margin-right":"12px","font-size":"24px",cursor:"pointer"},attrs:{title:"全屏/取消",type:e.fullscreen?"fullscreen-exit":"fullscreen"},on:{click:e.toggle}})],1)],2):e._e()],1)],1),n("router-create-modal",{ref:"routerCreateModal",attrs:{projectType:e.projectType},on:{complete:function(t){return e.getMenuList(t)}}})],1)},i=[],r=(n("8e6e"),n("456d"),n("28a5"),n("7f7f"),n("a481"),n("75fc")),a=(n("96cf"),n("3b8d")),c=(n("ac6a"),n("7514"),n("6762"),n("2fdb"),n("bd86")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"drag-modules"},[n("div",{staticClass:"modules-box"},[e._l(e.sourceList,(function(t,o){return[n("div",{directives:[{name:"show",rawName:"v-show",value:void 0===t.hidden||!t.hidden,expression:"s.hidden === undefined || !s.hidden"},{name:"permission",rawName:"v-permission",value:t.list.map((function(e){return"pc_page_m_"+e.mark})),expression:"s.list.map(col => {return `pc_page_m_${col.mark}`})"}],key:t+"_"+o},[n("h3",{staticClass:"title-line"},[e._v(e._s(t.name))]),n("draggable",{attrs:{element:"a-row","ghost-class":"sortable-ghost",options:{group:{name:"compgroup",pull:"clone",put:!1},sort:!1}},model:{value:t.list,callback:function(n){e.$set(t,"list",n)},expression:"s.list"}},[e._l(t.list,(function(t){return[n("div",{directives:[{name:"permission",rawName:"v-permission",value:["pc_page_m_"+t.mark],expression:"[`pc_page_m_${item.mark}`]"}],key:t.mark,staticClass:"module-item",class:{current:e.currentModule.mark===t.mark}},[n("p",{staticClass:"item-line"},[n("span",{staticClass:"item-icon"},[n("a-icon",{attrs:{type:t.icon}})],1),e._v("\n                  "+e._s(t.name)+"\n                ")])])]}))],2)],1)]}))],2),n("div",{staticClass:"preview-container",style:"height: "+e.workPanelHeight+"px;max-width: "+e.workPanelMaxWidth+"px"},[n("div",{staticClass:"module-modal"},[n("work-panel",{ref:"workPanel",attrs:{type:"root",code:e.code,"project-type":e.projectType},on:{add:function(t){return e.$emit("add",t)},remove:function(t){return e.$emit("remove",t)}},model:{value:e.targetList,callback:function(t){e.targetList=t},expression:"targetList"}})],1)]),n("div",{staticClass:"config-page"},[n("config-page",{attrs:{"project-type":e.projectType,code:e.code}})],1)]),n("a-modal",{attrs:{title:"当前配置文本",width:"800px"},model:{value:e.model1,callback:function(t){e.model1=t},expression:"model1"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.configMapStr,expression:"configMapStr"}],attrs:{name:"moduleConfigMap",id:"moduleConfigMap",cols:"30",rows:"30"},domProps:{value:e.configMapStr},on:{input:function(t){t.target.composing||(e.configMapStr=t.target.value)}}})])],1)},s=[],u=n("310e"),d=n.n(u),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabs-container",class:{expand:e.expand},style:"height: "+(e.configPanelHeight+100)+"px;"+(e.expand?"width: "+e.designerConfigPanelWidth+"px;":"")},[n("a-tabs",{model:{value:e.panelActiveKey,callback:function(t){e.panelActiveKey=t},expression:"panelActiveKey"}},[n("template",{slot:"tabBarExtraContent"},[!0===e.expand&&!0===e.expandComplete?n("a-popover",{attrs:{placement:"leftTop",title:"常用设置",trigger:"click"}},[n("div",{staticStyle:{width:"200px",height:"120px"},attrs:{slot:"content"},slot:"content"},[n("a-form-model",e._b({attrs:{layout:"horizontal"}},"a-form-model",{labelCol:{span:6},wrapperCol:{span:18}},!1),[n("a-form-model-item",{attrs:{label:"宽度"}},[n("a-radio-group",{attrs:{value:e.panelWidthType},on:{change:function(t){return e.$store.commit("SET_DESINGER_CONFIG_PANEL_WIDTH_TYPE",t.target.value)}}},[n("a-radio-button",{attrs:{value:"large"}},[e._v("\n                      宽\n                    ")]),n("a-radio-button",{attrs:{value:"normal"}},[e._v("\n                      中\n                    ")]),n("a-radio-button",{attrs:{value:"small"}},[e._v("\n                      窄\n                    ")])],1)],1)],1)],1),n("a-button",{attrs:{icon:"setting",type:"link"}})],1):e._e(),n("a-button",{attrs:{type:"link",icon:e.expand?"double-right":"double-left"},on:{click:e.toggleExpand}})],1),n("a-tab-pane",{key:"config_1",attrs:{tab:"组件属性"}},[n("div",{staticClass:"config-container",style:"height: "+e.configPanelHeight+"px;"},e._l(e.moduleConfigMap,(function(t){return n(e.componentMap[t.mark],{directives:[{name:"show",rawName:"v-show",value:!!e.currentModule.uuid&&e.currentModule.uuid===t.uuid,expression:"!!currentModule.uuid && currentModule.uuid === item.uuid"}],key:t.uuid,tag:"component",attrs:{uuid:t.uuid,code:e.code,"project-type":e.projectType}})})),1)]),n("a-tab-pane",{key:"config_2",attrs:{tab:"通用属性","force-render":!0}},[n("common-config",{staticClass:"config-container",style:"height: "+e.configPanelHeight+"px;",attrs:{projectType:e.projectType,code:e.code}})],1)],2)],1)},f=[],m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-box"},[n("general-data-config",{directives:[{name:"permission",rawName:"v-permission",value:["pc_page_m_panelData"],expression:"['pc_page_m_panelData']"}],attrs:{code:e.code,workspace:"DragConfig"}}),n("a-form",{attrs:{layout:"horizontal"}},[n("h3",{staticClass:"title separator"},[e._v("功能配置")]),n("a-form-model",{attrs:{layout:"horizontal"}},[n("a-form-model-item",{attrs:{label:"",labelCol:{span:2},wrapperCol:{span:22}}},[n("a-row",[n("a-col",{attrs:{span:24}},[n("a-checkbox",{attrs:{indeterminate:e.indeterminate,checked:e.checkAll},on:{change:e.onCheckAllChange}},[e._v("\n              全选\n            ")])],1)],1),n("a-checkbox-group",{attrs:{value:e.funcList},on:{change:e.onChange}},[e._l(e.funcOptions,(function(t){return["delete"===t.value?[n("a-row",{key:t.value},[n("a-col",{attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                    "+e._s(t.label)+"\n                  ")])],1)],1)]:"create"===t.value||"update"===t.value?[n("a-row",{directives:[{name:"permission",rawName:"v-permission",value:["pc_page_p_form"],expression:"['pc_page_p_form']"}],key:t.value},[n("a-col",{attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                    "+e._s(t.label)+"\n                  ")])],1)],1)]:[n("a-row",{directives:[{name:"permission",rawName:"v-permission",value:["pc_page_p_"+t.value],expression:"[`pc_page_p_${opt.value}`]"}],key:t.value},[n("a-col",{attrs:{span:24}},[n("a-checkbox",{attrs:{value:t.value}},[e._v("\n                    "+e._s(t.label)+"\n                  ")])],1)],1)]]}))],2)],1)],1)],1)],1)},g=[],h=n("8141"),b=n("2f62");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=Object(b["a"])("DragConfig"),k=w.mapMutations,C=w.mapState,M=[{label:"详情",value:"detail"},{label:"新建",value:"create"},{label:"更新",value:"update"},{label:"删除",value:"delete"},{label:"导入",value:"import"},{label:"导出",value:"export"}],x={name:"CommonConfig",data:function(){return{funcOptions:M}},methods:y(y({},k(["updateFuncList"])),{},{onChange:function(e){this.updateFuncList(e)},onCheckAllChange:function(e){var t=this.funcOptions.map((function(e){return e.value}));this.updateFuncList(e.target.checked?t:[])}}),computed:y(y({},C({funcList:function(e){return e.commonConfig.funcList}})),{},{indeterminate:function(){return!!this.funcList.length&&this.funcList.length>1&&this.funcList.length<this.funcOptions.length+1},checkAll:function(){return this.funcList.length===this.funcOptions.length+1}}),components:{generalDataConfig:h["a"]},props:{code:{type:String,default:""},projectType:{type:String,required:!0}}},O=x,j=(n("d1f9"),n("2877")),_=Object(j["a"])(O,m,g,!1,null,"173d624c",null),L=_.exports,P=n("6892");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={name:"configPage",data:function(){return{panelActiveKey:"config_1",showConfigPannel:!0,componentMap:{},configPanelHeight:60,expand:!1,expandComplete:!1,expandTimer:0}},methods:{removeCurrentModule:function(){this.$emit("removeCurrentModule")},loadModule:function(e){var t=this.componentMap[e.mark];t||(this.componentMap[e.mark]=function(){return n("f826")("./".concat(e.mark,"/config.vue"))})},windowResize:function(){var e=180;this.configPanelHeight=window.innerHeight-e},toggleExpand:function(){var e=this;this.expand=!this.expand,!0===this.expand?this.expandTimer=setTimeout((function(){e.expandComplete=!0}),200):(clearInterval(this.expandTimer),this.expandComplete=!1)}},watch:{currentModule:function(e){this.loadModule(e)}},computed:S(S(S({},Object(b["f"])({panelWidthType:function(e){return e.customProperties.designer.configPanelWidthType}})),Object(b["d"])(["designerConfigPanelWidth"])),{},{currentModule:function(){return this.$store.state.DragConfig[this.code].currentModule},moduleConfigMap:function(){return this.$store.state.DragConfig[this.code].moduleConfigMap}}),components:{commonConfig:L},props:{code:{type:String,required:!0},projectType:{type:String,required:!0}},created:function(){var e=this;this.windowResize(!1),window.addEventListener("resize",this.windowResize),P["a"].$on("switchModuleConfigPanel_".concat(this.code),(function(){e.panelActiveKey="config_1"}))},destroyed:function(){window.removeEventListener("resize",this.windowResize)}},D=E,F=(n("5d22"),Object(j["a"])(D,p,f,!1,null,"62c3974e",null)),$=F.exports,N=n("5bd9"),R=[{name:"列表页组件",code:"list",list:[{name:"搜索区",icon:"search",mark:"tableSearch"},{name:"操作区",icon:"tool",mark:"tableOperate"},{name:"表格列表",icon:"unordered-list",mark:"tableList"}]},{name:"表单页组件",code:"form",list:[{name:"表单组件",icon:"form",mark:"formPanel"}]},{name:"详情页组件",code:"detail",list:[{name:"详情信息",icon:"more",mark:"detailPanel"},{name:"实体列表",icon:"table",mark:"refEntityListPanel"}]},{name:"数据导入",code:"import",list:[{name:"表格导入",icon:"cloud-upload",mark:"excelImport"}]},{name:"数据导出",code:"export",list:[{name:"表格导出",icon:"cloud-download",mark:"excelExport"}]},{name:"页面集成",hidden:!0,list:[{name:"通用参数",icon:"code-sandbox",mark:"panelData"}]},{name:"基础组件",list:[{name:"间隔行",icon:"column-height",mark:"paddingc"},{name:"标题行",icon:"line-height",mark:"titleLine"},{name:"操作栏",icon:"control",mark:"operateLine"},{name:"布局器",icon:"layout",mark:"layoutc"},{name:"面板容器",icon:"block",mark:"panelContainer"}]},{name:"布局组件",code:"",list:[{name:"布局",icon:"table",mark:"layoutc"}]}],I={name:"PcDesigner",data:function(){return{model1:!1,targetList:[],workPanelHeight:300,workPanelMaxWidth:1920}},methods:{windowResize:function(e){var t=!0===e?70:120,n=!0===e?500:546;this.workPanelHeight=window.innerHeight-t,this.workPanelMaxWidth=window.innerWidth-n}},watch:{targetList:function(e,t){1!==t.length||2!==e.length||e[0].uuid||(e[0]=t[0]),this.$emit("change",e)}},computed:{sourceList:function(){var e=this;return R.filter((function(t){return void 0===t.code||t.code===e.code}))},currentModule:function(){return this.$store.state.DragConfig[this.code].currentModule},configMapStr:function(){var e={moduleList:this.targetList,configMap:this.$store.state.DragConfig[this.code].moduleConfigMap};return JSON.stringify(e)}},components:{draggable:d.a,"work-panel":N["a"],"config-page":$},props:{code:{type:String,required:!0},initModuleMarkList:{type:Array,required:!1,default:void 0},projectType:{type:String,required:!0}},mounted:function(){this.$nextTick(Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.initModuleMarkList){e.next=9;break}t=0;case 2:if(!(t<this.initModuleMarkList.length)){e.next=9;break}return n=this.initModuleMarkList[t],e.next=6,this.$refs.workPanel.addModuleObj({mark:n},t);case 6:t++,e.next=2;break;case 9:case"end":return e.stop()}}),e,this)}))))},created:function(){this.windowResize(!1),window.addEventListener("resize",this.windowResize)},destroyed:function(){window.removeEventListener("resize",this.windowResize)}},q=I,z=(n("6726"),Object(j["a"])(q,l,s,!1,null,"4f1f65a9",null)),A=z.exports,G=n("3aa3"),B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-modal",{attrs:{title:"添加上级菜单",visible:e.state.visible,width:720,okText:"确定",cancelText:"取消"},on:{ok:e.onSubmit,cancel:e.close}},[n("a-form",{attrs:{layout:"vertical",form:e.form}},[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{span:8}},[n("a-form-item",{attrs:{label:"菜单名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["displayName",{rules:[{required:!0,message:"菜单名称不能为空",whitespace:!0}]}],expression:"[\n              'displayName',\n              {\n                rules: [{ required: true, message: '菜单名称不能为空', whitespace: true }]\n              }\n            ]"}],attrs:{placeholder:"菜单显示名称"}})],1)],1),n("a-col",{attrs:{span:8}},[n("a-form-item",{attrs:{label:"菜单编码"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["resourceCode",{rules:[{required:!0,message:"菜单编码不能为空",whitespace:!0},{validator:e.validator}]}],expression:"[\n              'resourceCode',\n              {\n                rules: [{ required: true, message: '菜单编码不能为空', whitespace: true }, {validator}]\n              }\n            ]"}],attrs:{placeholder:"小写英文编码"}})],1)],1),n("a-col",{attrs:{span:8}},[n("a-form-item",{attrs:{label:"菜单图标"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["icon",{rules:[{required:!0,message:"菜单图标不能为空",whitespace:!0}]}],expression:"[\n              'icon',\n              {\n                rules: [{ required: true, message: '菜单图标不能为空', whitespace: true }]\n              }\n            ]"}],attrs:{placeholder:"请选择或输入菜单图标"}})],1)],1)],1),n("a-form-item",{attrs:{label:"点击选择图标"}},[n("a-row",{staticStyle:{"max-height":"240px","overflow-y":"scroll"}},["antdv"===e.projectType?e._l(e.iconsMap["antdv"],(function(t){return n("a-col",{key:t,staticClass:"icon-col",class:{current:e.form.getFieldValue("icon")===t},attrs:{span:2},on:{click:function(){e.form.setFieldsValue({icon:t})}}},[n("a-icon",{attrs:{type:t}})],1)})):e._e(),"element"===e.projectType?e._l(e.iconsMap["element"],(function(t){return n("a-col",{key:t,staticClass:"icon-col icon-element",class:{current:e.form.getFieldValue("icon")===t},attrs:{span:2},on:{click:function(){e.form.setFieldsValue({icon:t})}}},[n("i",{class:t})])})):e._e()],2)],1)],1)],1)},W=[],V=n("2abb");function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={antdv:["account-book","alert","api","appstore","audio","bank","bell","book","bug","bulb","calculator","build","calendar","camera","car","carry-out","cloud","code","compass","contacts","container","control","credit-card","crown","customer-service","dashboard","database","dislike","environment","experiment","eye-invisible","eye","file-add","file-excel","file-exclamation","file-image","file-markdown","file-pdf","file-ppt","file-text","file-unknown","file-word","file-zip","file","filter","fire","flag","folder-add","folder","folder-open","frown","funnel-plot","gift","hdd","heart","home","hourglass","idcard","insurance","interaction","layout","like","lock","mail","medicine-box","meh","message","mobile","money-collect","pay-circle","notification","phone","picture","play-square","printer","profile","project","pushpin","property-safety","read","reconciliation","red-envelope","rest","rocket","safety-certificate","save","schedule","security-scan","setting","shop","shopping","skin","smile","sound","star","switcher","tablet","tag","tags","tool","thunderbolt","trophy","unlock","usb","video-camera","wallet","apartment","audit","barcode","bars","block","border","branches","ci","cloud-download","cloud-server","cloud-sync","cloud-upload","cluster","coffee","copyright","deployment-unit","desktop","disconnect","dollar","download","ellipsis","euro","exception","export","file-done","file-jpg","file-protect","file-sync","file-search","fork","gateway","global","gold","history","import","inbox","key","laptop","link","line","loading-3-quarters","loading","man","menu","monitor","more","number","percentage","paper-clip","pound","poweroff","pull-request","qrcode","reload","safety","robot","scan","search","select","shake","share-alt","shopping-cart","solution","sync","table","team","to-top","trademark","transaction","upload","user-add","user-delete","usergroup-add","user","usergroup-delete","wifi","woman"],element:["el-icon-platform-eleme","el-icon-eleme","el-icon-delete-solid","el-icon-delete","el-icon-s-tools","el-icon-setting","el-icon-user-solid","el-icon-user","el-icon-phone","el-icon-phone-outline","el-icon-more","el-icon-more-outline","el-icon-star-on","el-icon-star-off","el-icon-s-goods","el-icon-goods","el-icon-warning","el-icon-warning-outline","el-icon-question","el-icon-info","el-icon-remove","el-icon-circle-plus","el-icon-success","el-icon-error","el-icon-zoom-in","el-icon-zoom-out","el-icon-remove-outline","el-icon-circle-plus-outline","el-icon-circle-check","el-icon-circle-close","el-icon-s-help","el-icon-help","el-icon-minus","el-icon-plus","el-icon-check","el-icon-close","el-icon-picture","el-icon-picture-outline","el-icon-picture-outline-round","el-icon-upload","el-icon-upload2","el-icon-download","el-icon-camera-solid","el-icon-camera","el-icon-video-camera-solid","el-icon-video-camera","el-icon-message-solid","el-icon-bell","el-icon-s-cooperation","el-icon-s-order","el-icon-s-platform","el-icon-s-fold","el-icon-s-unfold","el-icon-s-operation","el-icon-s-promotion","el-icon-s-home","el-icon-s-release","el-icon-s-ticket","el-icon-s-management","el-icon-s-open","el-icon-s-shop","el-icon-s-marketing","el-icon-s-flag","el-icon-s-comment","el-icon-s-finance","el-icon-s-claim","el-icon-s-custom","el-icon-s-opportunity","el-icon-s-data","el-icon-s-check","el-icon-s-grid","el-icon-menu","el-icon-share","el-icon-d-caret","el-icon-caret-left","el-icon-caret-right","el-icon-caret-bottom","el-icon-caret-top","el-icon-bottom-left","el-icon-bottom-right","el-icon-back","el-icon-right","el-icon-bottom","el-icon-top","el-icon-top-left","el-icon-top-right","el-icon-arrow-left","el-icon-arrow-right","el-icon-arrow-down","el-icon-arrow-up","el-icon-d-arrow-left","el-icon-d-arrow-right","el-icon-video-pause","el-icon-video-play","el-icon-refresh","el-icon-refresh-right","el-icon-refresh-left","el-icon-finished","el-icon-sort","el-icon-sort-up","el-icon-sort-down","el-icon-rank","el-icon-loading","el-icon-view","el-icon-c-scale-to-original","el-icon-date","el-icon-edit","el-icon-edit-outline","el-icon-folder","el-icon-folder-opened","el-icon-folder-add","el-icon-folder-remove","el-icon-folder-delete","el-icon-folder-checked","el-icon-tickets","el-icon-document-remove","el-icon-document-delete","el-icon-document-copy","el-icon-document-checked","el-icon-document","el-icon-document-add","el-icon-printer","el-icon-paperclip","el-icon-takeaway-box","el-icon-search","el-icon-monitor","el-icon-attract","el-icon-mobile","el-icon-scissors","el-icon-umbrella","el-icon-headset","el-icon-brush","el-icon-mouse","el-icon-coordinate","el-icon-magic-stick","el-icon-reading","el-icon-data-line","el-icon-data-board","el-icon-pie-chart","el-icon-data-analysis","el-icon-collection-tag","el-icon-film","el-icon-suitcase","el-icon-suitcase-1","el-icon-receiving","el-icon-collection","el-icon-files","el-icon-notebook-1","el-icon-notebook-2","el-icon-toilet-paper","el-icon-office-building","el-icon-school","el-icon-table-lamp","el-icon-house","el-icon-no-smoking","el-icon-smoking","el-icon-shopping-cart-full","el-icon-shopping-cart-1","el-icon-shopping-cart-2","el-icon-shopping-bag-1","el-icon-shopping-bag-2","el-icon-sold-out","el-icon-sell","el-icon-present","el-icon-box","el-icon-bank-card","el-icon-money","el-icon-coin","el-icon-wallet","el-icon-discount","el-icon-price-tag","el-icon-news","el-icon-guide","el-icon-male","el-icon-female","el-icon-thumb","el-icon-cpu","el-icon-link","el-icon-connection","el-icon-open","el-icon-turn-off","el-icon-set-up","el-icon-chat-round","el-icon-chat-line-round","el-icon-chat-square","el-icon-chat-dot-round","el-icon-chat-dot-square","el-icon-chat-line-square","el-icon-message","el-icon-postcard","el-icon-position","el-icon-turn-off-microphone","el-icon-microphone","el-icon-close-notification","el-icon-bangzhu","el-icon-time","el-icon-odometer","el-icon-crop","el-icon-aim","el-icon-switch-button","el-icon-full-screen","el-icon-copy-document","el-icon-mic","el-icon-stopwatch","el-icon-medal-1","el-icon-medal","el-icon-trophy","el-icon-trophy-1","el-icon-first-aid-kit","el-icon-discover","el-icon-place","el-icon-location","el-icon-location-outline","el-icon-location-information","el-icon-add-location","el-icon-delete-location","el-icon-map-location","el-icon-alarm-clock","el-icon-timer","el-icon-watch-1","el-icon-watch","el-icon-lock","el-icon-unlock","el-icon-key","el-icon-service","el-icon-mobile-phone","el-icon-bicycle","el-icon-truck","el-icon-ship","el-icon-basketball","el-icon-football","el-icon-soccer","el-icon-baseball","el-icon-wind-power","el-icon-light-rain","el-icon-lightning","el-icon-heavy-rain","el-icon-sunrise","el-icon-sunrise-1","el-icon-sunset","el-icon-sunny","el-icon-cloudy","el-icon-partly-cloudy","el-icon-cloudy-and-sunny","el-icon-moon","el-icon-moon-night","el-icon-dish","el-icon-dish-1","el-icon-food","el-icon-chicken","el-icon-fork-spoon","el-icon-knife-fork","el-icon-burger","el-icon-tableware","el-icon-sugar","el-icon-dessert","el-icon-ice-cream","el-icon-hot-water","el-icon-water-cup","el-icon-coffee-cup","el-icon-cold-drink","el-icon-goblet","el-icon-goblet-full","el-icon-goblet-square","el-icon-goblet-square-full","el-icon-refrigerator","el-icon-grape","el-icon-watermelon","el-icon-cherry","el-icon-apple","el-icon-pear","el-icon-orange","el-icon-coffee","el-icon-ice-tea","el-icon-ice-drink","el-icon-milk-tea","el-icon-potato-strips","el-icon-lollipop","el-icon-ice-cream-square","el-icon-ice-cream-round"]},J={name:"DictionaryModal",data:function(){return{state:{visible:!1,submitBtn:!1},form:this.$form.createForm(this),icon:"",iconsMap:U}},methods:{validator:function(e,t,n){"system"===t?n(new Error("菜单编码不能设置为system")):n()},open:function(){this.state.visible=!0},close:function(){this.state.visible=!1,this.form.resetFields()},validate:function(){var e=this;return new Promise((function(t,n){e.form.validateFields((function(o,i){o?n(o):(i["parentId"]=0,i["displayType"]="MENU",t(i)),setTimeout((function(){e.state.submitBtn=!1}),600)}))}))},onSubmit:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.state.submitBtn=!0,e.next=3,this.validate();case 3:return t=e.sent,e.prev=4,e.next=7,this.add(t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](4),this.submitFailed(e.t0);case 12:case"end":return e.stop()}}),e,this,[[4,9]])})));function t(){return e.apply(this,arguments)}return t}(),add:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=K(K({},t),{},{parentId:0,displayType:"MENU"}),console.log(t),e.next=4,V["a"].post("/diboot/devtools/pcDesigner/addMenu",t);case 4:if(n=e.sent,0!==n.code){e.next=10;break}sessionStorage.setItem("currentIcon",t.icon),this.submitSuccess("添加上级菜单成功",n.data),e.next=11;break;case 10:throw new Error(n.msg);case 11:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),submitSuccess:function(e,t){this.$notification.success({message:"操作成功",description:e}),this.close(),this.form.resetFields(),this.$emit("complete",t)},submitFailed:function(e){e&&e.msg&&this.$notification.error({message:"操作失败",description:e.msg})}},props:{projectType:{type:String,default:""}}},Y=J,Q=(n("01c1"),Object(j["a"])(Y,B,W,!1,null,"6f2a85bc",null)),X=Q.exports,Z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-card",[n("a-row",{attrs:{slot:"title"},slot:"title"},[n("a-col",{attrs:{span:18}},[n("a-input-search",{attrs:{placeholder:"搜索（表名或备注）..."},on:{change:e.onSearch},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}})],1),n("a-col",{staticStyle:{"text-align":"center"},attrs:{span:6}},[e.hideInitTable?n("a-tag",{attrs:{color:"cyan"}},[e._v("已隐藏预置表")]):n("a-switch",{attrs:{checkedChildren:"已显示预置表",unCheckedChildren:"已隐藏预置表","default-checked":e.showInitTables},on:{change:function(t){return e.$store.commit("setShowInitTables",t)}}})],1)],1),e._l(e.validTables,(function(t){return n("a-card-grid",{key:t.tableName,staticClass:"db-main",staticStyle:{width:"25%","text-align":"left",cursor:"pointer","overflow-x":"hidden"},attrs:{title:t.tableName},on:{click:function(n){return e.onTableChanged(t.tableName)}}},[n("div",{staticClass:"title"},[e._v(e._s(t.tableName))]),n("div",{staticClass:"desc"},[e._v(e._s(t.objName))])])}))],2)],1)},ee=[];function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var oe={name:"TableListSearch",data:function(){return{searchVal:""}},methods:ne(ne({},Object(b["e"])(["resetDatabase"])),{},{onSearch:function(){this.$store.dispatch("searchTables",this.searchVal)},onTableChanged:function(e){this.$emit("tableChanged",e)}}),computed:ne(ne({},Object(b["f"])({showInitTables:function(e){return e.database.showInitTables},visibleTables:function(e){return e.database.visibleTables}})),{},{validTables:function(){return this.visibleTables&&this.visibleTables.length>0&&void 0!==this.showInitTables&&null!==this.showInitTables?this.showInitTables&&!this.hideInitTable?this.visibleTables:this.visibleTables.filter((function(e){return!0===e.editable})):[]}}),mounted:function(){this.resetDatabase(),this.$store.dispatch("GetTables").then((function(){}))},props:{hideInitTable:{type:Boolean,default:!1}}},ie=oe,re=Object(j["a"])(ie,Z,ee,!1,null,null,null),ae=re.exports,ce=n("2ef0"),le=n.n(ce),se=[{code:"list",name:"列表页",icon:"unordered-list",funcList:["list"],moduleList:["tableSearch","tableOperate","tableList"],closable:!1},{code:"form",name:"表单页",icon:"form",funcList:["create","update"],moduleList:["formPanel"],closable:!0},{code:"detail",name:"详情页",icon:"info-circle",funcList:["detail"],moduleList:["detailPanel"],closable:!0},{code:"export",name:"导出",icon:"cloud-download",funcList:["export"],moduleList:["excelExport"],closable:!0},{code:"import",name:"导入",icon:"cloud-upload",funcList:["import"],moduleList:["excelImport"],closable:!0}],ue=n("03cd"),de=n.n(ue),pe=n("2b0e"),fe=n("3e16");function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){Object(c["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}pe["default"].use(de.a,{name:"fs"});var he={name:"PcDesignerIndex",inject:["reload"],data:function(){return{initial:!0,loadTableFlag:!1,hasIam:void 0,currentPaneKey:"list",projectType:"",moduleListMap:{},router:void 0,menuList:[],parentMenuCode:"",originRouter:"",currentGenerateRouter:"",currentGenerateChildRouter:"",fullscreen:!1,loading:!1,currentMenuName:"",oldFuncListSize:0}},methods:ge(ge(ge({},Object(b["e"])(["DragConfig/addFunc","DragConfig/removeFunc","resetDatabase","DragConfig/resetPcDesigner","DragConfig/updateFuncList"])),Object(b["c"])(["switchTable"])),{},{addModule:function(e){if("tableOperate"===e.mark){var t=this.funcList.filter((function(e){return!["create","import","export"].includes(e)}));t.push.apply(t,["create","import","export"]),this["DragConfig/updateFuncList"](t)}},removeModule:function(e){var t=e.m,n=e.targetList;if("tableOperate"===t.mark){var o=n.find((function(e){return e.mark===t.mark}));if(void 0===o){var i=this.funcList.filter((function(e){return!["create","import","export"].includes(e)}));this["DragConfig/updateFuncList"](i)}}},changeCurrentTable:function(e){var t=this;this.switchTable(e).then((function(){t.initial=!1,t.currentMenuName="".concat(t.tableObj[e].classLabel,"管理"),setTimeout((function(){t.loadTableFlag=!0}),320)}))},onEdit:function(e,t){this["".concat(t,"Pane")](e)},addPane:function(){var e=this,t=this.currentPanes.map((function(e){return e.code})),n=se.find((function(e){return!t.includes(e.code)}));if(void 0===n)return this.$message.warning("没有更多选项"),!1;this.currentPaneKey=n.code;var o=le.a.cloneDeep(n.funcList);if("form"!==n.code||this.funcList.includes("delete"))o.forEach((function(t){e["DragConfig/addFunc"](t)}));else{var i=this;this.$confirm({title:"需要同步添加删除功能吗?",content:"您正在自动添加表单项，是否也需要添加删除功能，确认后将自动添加该功能！",onOk:function(){o.push("delete"),o.forEach((function(e){i["DragConfig/addFunc"](e)}))},onCancel:function(){o.forEach((function(e){i["DragConfig/addFunc"](e)}))}})}},removePane:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPaneFuncList(t);case 2:n=e.sent,n.forEach((function(e){o["DragConfig/removeFunc"](e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getPaneFuncList:function(e){var t=this,n=this;return new Promise((function(o){var i=se.find((function(t){return t.code===e}));if(void 0===i)return n.$message.warning("参数错误"),o([]),[];"form"===e&&t.funcList.includes("delete")?n.$confirm({title:"需要同步移除删除功能吗?",content:"您正在移除表单项，是否也需要移除删除功能，确认后将自动移除删除功能！",onOk:function(){o([].concat(Object(r["a"])(i.funcList),["delete"]))},onCancel:function(){o(i.funcList)}}):o(i.funcList)}))},onMainTableChange:function(){},moduleListChanged:function(e,t){this.moduleListMap[e]=t},generate:function(){var e=this,t=this.$store.state.database.currentTableName,n={};this.currentPanes.forEach((function(t){n[t.code]=le.a.cloneDeep(e.$store.state.DragConfig[t.code]),n[t.code].moduleList=e.moduleListMap[t.code]||[],delete n[t.code].currentModule}));var o=this.$store.state.DragConfig.commonConfig,i=this.projectType,r={tableName:t,projectType:i,pageConfig:n,commonConfig:o};if(!this.validateConfig(r))return!1;this.loading=!0;var a=JSON.parse(this.parentMenuCode),c=a.moduleName,l=a.moduleTitle,s=c?c.replace(c[0],c[0].toLowerCase()):"";this.currentGenerateRouter=this.generateRouter(s,t,c,l,sessionStorage.getItem("currentIcon"));var u=JSON.stringify(r);G["a"].post("/diboot/devtools/pcDesigner/generate",{config:u,originRouter:this.originRouter,currentGenerateRouter:this.currentGenerateRouter,currentChildRouter:this.currentChildRouter,moduleName:a.moduleName,moduleId:a.id,className:this.tableObj[t].className,classLabel:this.tableObj[t].classLabel,tableName:t}).then((function(t){e.loading=!1,0===t.code?(e.$notification.success({message:"操作成功！",description:"生成页面成功！"}),sessionStorage.removeItem("currentIcon"),e.reload()):e.$notification.error({message:"操作失败！",description:t.msg})})).catch((function(){e.loading=!1}))},validateConfig:function(e){var t=[];e.tableName||t.push("主表"),e.projectType||t.push("前端项目类型"),this.parentMenuCode||t.push("上级菜单");var n=e.pageConfig;if(n){var o=[];if(le.a.forEach(n,(function(e,t){var n=e.moduleList;0===n.length&&o.push(t)})),o.length>0){var i=se.filter((function(e){return o.includes(e.code)})).map((function(e){return e.name})).join("、");return this.$message.error("请先预览确认 ".concat(i," 相关页面的配置！")),!1}}return!(t.length>0)||(this.$message.error("请选择 ".concat(t.join("、")," !")),!1)},checkFileExist:function(){var e=this;G["a"].get("/diboot/devtools/component/allComponents").then((function(t){if(0===t.code&&!t.data.includes("FILE")){var n="open".concat(Date.now());e.$notification.open({message:"后端文件组件缺失，请知悉！",duration:0,description:"文件组件的缺失将导致 导入、导出，文件、图片上传等功能不能正常使用，请在后端依赖中引入文件组件",btn:function(t){return t("a-button",{props:{type:"primary",size:"small"},on:{click:function(){return e.$notification.close(n)}}},"确定")},key:n,onClose:close})}}))},getProjectType:function(){var e=this;G["a"].getWithoutMsg("/diboot/devtools/pcDesigner/projectType").then((function(t){0===t.code?e.projectType=t.data:e.$notification.warning({key:t.msg,message:"前端配置提示",description:t.msg&&t.msg.includes(":")?t.msg.split(":")[1]:t.msg})}))},getMenuList:function(e){var t=this;G["a"].get("/diboot/devtools/pcDesigner/getTreeMenuList").then((function(n){0===n.code&&(t.menuList=n.data,void 0!==e&&setTimeout((function(){t.parentMenuCode='{"moduleName": "'.concat(e.resourceCode,'", "moduleTitle": "').concat(e.displayName,'", "id": ').concat(e.id,"}")}),200))}))},getRouter:function(){var e=this;G["a"].getWithoutMsg("/diboot/devtools/pcDesigner/router").then((function(t){0===t.code?e.originRouter=t.data:e.$notification.warning({key:t.msg,message:"前端配置提示",description:t.msg&&t.msg.includes(":")?t.msg.split(":")[1]:t.msg})}))},generateRouter:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"dashboard",r=this.tableObj[t].instClassName,a=this.tableObj[t].className,c=this.currentMenuName||this.tableObj[t].classLabel,l=e?"/".concat(e):"/";o=o||c,n=n||"GenerateRouter",e=e?"/".concat(e,"/"):"/";var s="antdv"===this.projectType;return this.currentChildRouter="\n       {\n         path: '".concat(s?e:"").concat(r,"/list',\n         name: '").concat(r,"List',\n         component: () => import('@/views").concat(e).concat(r,"/list'),\n         meta: { title: '").concat(c,"', keepAlive: true, permission: ['").concat(a,"'] }\n       }\n      "),"\n    {\n     path: '".concat(l,"',\n     redirect: '").concat(e).concat(r,"/list',\n     component: ").concat(s?"PageView":"Layout",",").concat(s?"":"\n     alwaysShow: true,","\n     name: '").concat(n,"',\n     meta: { title: '").concat(o,"', icon: '").concat(i,"', permission: ['").concat(n,"'] },\n     children: [\n       ").concat(this.currentChildRouter,"\n     ]\n    }")},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},toggle:function(){this.$refs["fullscreen"].toggle()},fullscreenChange:function(e){var t=this;this.fullscreen=e,setTimeout((function(){t.currentPanes.forEach((function(n){var o="pc_designer_".concat(n.code);t.$refs[o]&&t.$refs[o].length>0&&t.$refs[o][0].windowResize&&t.$refs[o][0].windowResize(e)}))}),500)},checkIamExist:function(){var e=this;G["a"].get("/diboot/devtools/component/allComponents").then((function(t){0===t.code&&(e.hasIam=t.data&&t.data.includes("IAM"))})).catch((function(){}))}}),mixins:[fe["a"]],computed:ge(ge({},Object(b["f"])({previewBtnGroupAlign:function(e){return e.customProperties.designer.previewBtnGroupAlign},visibleTables:function(e){return e.database.visibleTables},currentTableName:function(e){return e.database.currentTableName},funcList:function(e){return e.DragConfig.commonConfig.funcList}})),{},{tableObj:function(){var e={};return this.visibleTables.forEach((function(t){e[t.tableName]={className:t.className,instClassName:t.instClassName,classLabel:t.objName}})),e},currentTableObj:function(){var e=this;return this.visibleTables&&this.visibleTables.length>0&&this.currentTableName?this.visibleTables.find((function(t){return t.tableName===e.currentTableName})):{}},currentPanes:function(){var e=this;return se.filter((function(t){var n=t.funcList.find((function(t){return e.funcList.includes(t)}));return void 0!==n}))}}),watch:{funcList:function(e){0!==this.oldFuncListSize&&e&&e.length<this.oldFuncListSize&&(this.currentPaneKey="list"),this.oldFuncListSize=e?e.length:0}},components:{pcDesigner:A,routerCreateModal:X,tableListSearch:ae,Fullscreen:de.a},created:function(){this.resetDatabase(),this["DragConfig/resetPcDesigner"](),this.getProjectType(),this.getRouter(),this.getMenuList(),this.checkFileExist(),this.checkIamExist(),this.$store.commit("INIT_DESINGER_CONFIG")},destroyed:function(){this.resetDatabase(),this["DragConfig/resetPcDesigner"]()}},be=he,ve=(n("7a92"),Object(j["a"])(be,o,i,!1,null,"c7361656",null));t["default"]=ve.exports},"7a92":function(e,t,n){"use strict";n("e2e4e")},9268:function(e,t,n){},c9be:function(e,t,n){"use strict";n("9268")},d1f9:function(e,t,n){"use strict";n("e57bb")},e2e4e:function(e,t,n){},e57bb:function(e,t,n){},f826:function(e,t,n){var o={"./detailPanel/config.vue":["dc04","designerModuleConfig0~designerModuleConfig11~designerModuleConfig3~designerModuleConfig5~designerMod~f49b3302","designerModuleConfig0"],"./excelExport/config.vue":["9b68","designerModuleConfig1"],"./excelImport/config.vue":["b4db","designerModuleConfig2"],"./formPanel/config.vue":["0ef1","designerModuleConfig0~designerModuleConfig11~designerModuleConfig3~designerModuleConfig5~designerMod~f49b3302","chunk-344e89be","designerModuleConfig11~designerModuleConfig3~designerModuleConfig5","designerModuleConfig3"],"./layoutc/config.vue":["1028","designerModuleConfig4"],"./operateLine/config.vue":["b095","designerModuleConfig0~designerModuleConfig11~designerModuleConfig3~designerModuleConfig5~designerMod~f49b3302","chunk-344e89be","designerModuleConfig11~designerModuleConfig3~designerModuleConfig5","designerModuleConfig5"],"./paddingc/config.vue":["6c8b","designerModuleConfig6"],"./panelContainer/config.vue":["2773","designerModuleConfig0~designerModuleConfig11~designerModuleConfig3~designerModuleConfig5~designerMod~f49b3302","designerModuleConfig7"],"./panelData/config.vue":["4a92","designerModuleConfig8"],"./refEntityListPanel/config.vue":["7411","designerModuleConfig9"],"./tableList/config.vue":["2f35","designerModuleConfig10"],"./tableOperate/config.vue":["1b72","designerModuleConfig0~designerModuleConfig11~designerModuleConfig3~designerModuleConfig5~designerMod~f49b3302","chunk-344e89be","designerModuleConfig11~designerModuleConfig3~designerModuleConfig5","designerModuleConfig11~designerModuleConfig14","designerModuleConfig11"],"./tableSearch/config.vue":["60c2","designerModuleConfig12"],"./timeLine/config.vue":["47ac","designerModuleConfig13"],"./titleLine/config.vue":["9bbb","designerModuleConfig11~designerModuleConfig14","designerModuleConfig14"]};function i(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(i)}))}i.keys=function(){return Object.keys(o)},i.id="f826",e.exports=i},f95a:function(e,t,n){var o={"./detailPanel/index.vue":["7db1","chunk-4bd6d997","designerModule0~designerModule3","designerModule0"],"./excelExport/index.vue":["e832","designerModule1"],"./excelImport/index.vue":["5eba","designerModule2~designerModule4","designerModule2"],"./formPanel/index.vue":["5d31","chunk-4bd6d997","designerModule0~designerModule3","designerModule3"],"./layoutc/index.vue":["f9bb","designerModule2~designerModule4","designerModule4"],"./operateLine/index.vue":["aed9","designerModule5~designerModule7","designerModule5"],"./paddingc/index.vue":["3d36","designerModule6"],"./panelContainer/index.vue":["fff3","designerModule5~designerModule7","designerModule7"],"./panelData/index.vue":["ff56","designerModule8"],"./refEntityListPanel/index.vue":["d603","designerModule9"],"./tableList/index.vue":["130c","designerModule10"],"./tableOperate/index.vue":["e715","designerModule11"],"./tableSearch/index.vue":["ec29","designerModule12"],"./timeLine/index.vue":["7a86","designerModule13"],"./titleLine/index.vue":["7cf1","designerModule14"]};function i(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(i)}))}i.keys=function(){return Object.keys(o)},i.id="f95a",e.exports=i}}]);